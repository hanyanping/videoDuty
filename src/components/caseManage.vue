<style scoped>
  .caseManage{
    margin: 15px auto;
    width:90%;
    overflow-y: scroll;
    overflow-x: hidden;
    height: 82vh;
    padding-bottom: 20px;
  }
  .caseContent{
    display: flex;
    padding-bottom:15px;
  }
  .caseLeft,.caseRight{
    background:#fff;
    margin-top: 5px;
    width: 100%;
    height:100px;
  }
  .caseCenter{
    width: 100%;
  }
  .caseManage .video-player{
    width: 100%;
    background: #fff;
    color: #fff;
    height: 488px;
  }
  .caseLeft .tit, .caseRight .tit {
    padding: 15px 0 5px;
  }
  .caseLeft .tit h4, .caseRight .tit h4{
    font-size: 20px;
    display: inline-block;
    border-left: 4px solid #35aa42;
    padding-left: 18px;
    font-weight: 600;
  }
  .editorCarInfo h4{
    font-size: 20px;
    font-weight: 600;
    margin-top:20px;
  }
  .caseLeft .cont, .caseRight .cont{
    padding: 0 20px 5px;
    overflow-x: scroll;
  }
 .m-noContent-mod {
    text-align: center;
  }
   .m-noContent-mod .mnm-icon {
    margin-bottom: 20px;
  }
    .m-noContent-mod p {
      color: #999;
      font-size: 15px;
  }
  .casePhotos .g-content-row {
    margin-bottom: 20px;
  }
  .casePhotos .g-content-row .gcr-mod{
    background: #fff;
  }
  .casePhotos .m-carNo-imgInfo .gcr-tit {
    padding: 16px 0 5px;
    position: relative;
    overflow: hidden;
    display: flex;
  }
  .casePhotos .m-carNo-imgInfo .gcr-tit h4, .typeContent h4{
    margin-top: 5px;
    font-size: 20px;
    display: inline-block;
    border-left: 4px solid #35aa42;
    padding-left: 18px;
    font-weight: 600;
  }
  .typeContent h4{
    border-left: none;
  }
  .gcr-tit .m-carNo-list {
    height: 40px;
    margin-left: 30px;
  }
  .gcr-tit .u-edit-icon {
    width: 16px;
    height: 14px;
    display: inline-block;
    background: url(../images/icon_edit_0.png) center center no-repeat;
    margin-left: 10px;
  }
  .gcr-tit .u-edit-iconGreay{
    width: 16px;
    height: 14px;
    display: inline-block;
    background: url(../images/icon_edit_1.png) center center no-repeat;
    margin-left: 10px;
  }
 .gcr-tit .m-carNo-add {
    cursor: pointer;
    width: 24px;
    height: 40px;
    display: inline-block;
    background: url(../images/icon_add_0.png) center center no-repeat;
    margin-left: 10px;
    -webkit-transition: all .2s ease-in 0s;
    transition: all .2s ease-in 0s;
  }
  .gcr-tit .m-carNo-list dd {
    font-size: 16px;
    padding: 10px;
    border: 1px solid #dcdcdc;
    margin-right: 10px;
    cursor: pointer;
  }
  .gcr-tit .m-carNo-list dd:hover{
    border: 1px solid #35aa42;
  }
  .casePhotos .g-content-row .gcr-cont {
    padding: 10px 0;
    min-height: 300px;
  }
  .footer{
    /*margin-top:10px;*/
    height: 60px;
    width: 100%;
    background: #2EAB3B;
  }
  .footer-inner{
    text-align: center;
    /*position: absolute;*/
    /*z-index: auto;*/
    /*left: 0;*/
    /*right: 0;*/
    /*bottom: 0;*/
  }
  .footer-inner p{
    line-height: 64px;
    font-size: 14px;
    color: #fff;
    margin: 0;
  }

  #picListZone .suibian{
    /*display: -webkit-box;*/
    margin-left: 15px;
    position:absolute;
    left:0;
  }
  #picListZone .suibian .suibianList{
    margin-bottom: 8px;
    float:left;
  }
  #picListZone .suibian img {
    width: 140px;
    height: 125px;
    display: block;
  }
  #picListZone .suibian  .liImgbox{
    background: #dcdcdc;
    position: relative;
    width: 140px;
    left: 0;
    top: 20px;
    height: 125px;
    margin: 0 8px;
  }
  #picListZone{
    width: 100%;
    margin: 0 auto;
    display: flex;
    height: 200px;
    justify-content: center;
  }
  #picListZone .ulBox{
    position:relative;
    width: 100%;
    /*overflow: hidden ;*/
  }
  #picListZone .suibian  .title {
    text-align: center;
    position: absolute;
    left: 0;
    bottom: 0px;
    height: 30px;
    line-height: 30px;
    width: 100%;
    background: rgba(255,255,255,.5);
    z-index: 99;
  }
  .scalImgBox,.editorCarInfo,.takePhoneImgBox,.takePhonetypeBox,.beizhuDiolag, .loadingBox,.sureDutyBox{
    background: rgba(0,0,0,0.8);
    width:100%;
    position: fixed;
    height: 100vh;
    top: 0;
    left: 0;
    z-index: 1020;
  }
  .loadingBox{
    background: rgba(0,0,0,0.3);
  }
  .loadingBox  .loadingBoxContent{
    width: 760px;
    margin:20vh auto;
    text-align: center;
    padding: 20px;
    min-height: 450px;
    position: relative;
  }
  .editorCarInfo,.beizhuDiolag{
    background: rgba(0,0,0,0.2);
     }
  .takePhonetypeBox{
    z-index: 1031;
  }
  .scalImgBox .bigImgContent,.takePhoneImgBox .takebigImgContent,.sureDutyBox .sureDutyContent{
    width: 45%;
    margin:15vh 20vh;
    margin-left:51%;
    background: #fff;
    padding: 20px;
    min-height: 450px;
    position: relative;
  }
  .sureDutyBox .sureDutyContent{
    width:38%;
    margin-top:10vh;
  }
  .takePhoneImgBox .takebigImgContent{
    min-height: 550px;
  }
  .takePhonetypeBox .typeContent{
    width: 45%;
    margin: 15vh;
    background: #fff;
    margin-left: 51%;
    padding: 20px;
    height: 600px;
    position: relative;
  }
  .editorCarInfo .editorContent,.beizhuDiolag .editorContent{
    width: 350px;
    margin-top: 16vh;
    margin-left: 72%;
    background: #fff;
    padding: 20px;
    height: 280px;
    position: relative;
  }
  .beizhuDiolag .editorContent{
    height: 325px;
  }
  .closeCaleImgBox,.closeEditorCar,.closeCityDiolag,.closetypeBox{
    font-size: 42px;
    right: 15px;
    top: 0;
    position: absolute;
    cursor: pointer;
  }
  .cityDialogBox .cityNameBox{
    width: 85%;
    text-align: center;
    clear: both;
    margin-left: 30px;
  }
  .cityDialogBox .cityNameBox .citySimpleName{
    width: 10%;
    height: 35px;
    line-height: 35px;
    border: 1px solid #bbb;
    color: #232323;
    border-radius: 5px;
    text-align: center;
    margin-right: 10px;
    float: left;
    margin-top: 20px;
    cursor: pointer;
  }
  .closeEditorCar{
    top: 5px;
  }
  .imgSize{
    width: 100%;
    height: 400px;
    margin:15px auto;
    vertical-align: middle;
  }
  .imgSize img{
    max-width:100%;
    height: 100%;
  }
  .prebutton{
    position: absolute;
    top: 35vh;
    left:10px;
    color:#2EAB3B;
    font-size:30px;
    cursor: pointer;
  }
  .nextbutton{
    cursor: pointer;
    position: absolute;
    right: 10px;
    top: 35vh;
    color:#2EAB3B;
    font-size:30px;
  }

  .deletImg,.saveImg,.takedeletImg,.takesaveImg, .sureDuty{
    color: #fff;
    width: 70px;
    height: 35px;
    margin-right:20px;
    line-height: 35px;
    text-align: center;
    cursor: pointer;
  }
  .sureDuty{
    padding: 10px 20px;
  }
  .deletImg, .takedeletImg{
    background: #e75b5f;
    cursor: pointer;
  }
  #doing .item-txt-list {
    line-height: 25px;
    font-size: 14px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .infoDiv{
    margin: 6px 18px;
  }

   #online{
    background: #efeff4;
    color: #999;
    border: 1px solid #dcdcdc;
    padding:8px;
    width: 110px;
    text-align: center;
  }
  .item-btn-box{
    padding:15px 0;
  }
  #onlineLoding{
    background: #efeff4;
    color: #999;
    border: 1px solid #dcdcdc;
    padding: 8px;
    width: 110px;
    text-align: center;
  }
  #onLinking {
    padding: 8px;
    border: 1px solid #35aa42;
    min-width: 65px;
    text-align: center;
    font-size: 16px;
    width: 110px;
    color: #35aa42;
  }
  #onOff{
    color: #e30920;
    border: 1px solid #e30920;
    padding: 8px 16px;
    text-align: center;
    width: 85px;
  }
  #hangUp,#duty{
    padding: 8px 16px;
    border: 1px solid #35aa42;
    min-width: 65px;
    text-align: center;
    font-size: 16px;
    color: #35aa42;
    margin-left: 6px;
  }
  #nohangUp,#noduty{
    color: rgb(153, 153, 153);
    background: rgb(239, 239, 244);
    border-width: 1px;
    border-style: solid;
    border-color: rgb(220, 220, 220);
    border-image: initial;
    padding: 8px 16px;
    text-align: center;
    min-width: 85px;
    margin-left:8px;
  }

  .item-btn-max{
    width:195px;
  }
    #finishOrder, #beizhu {
    background: #35aa42;
    color: #fff;
    text-align: center;
    font-size: 16px;
     padding: 8px 16px;
     min-width:85px;
  }
  #beizhu{
    margin-left: 6px;
  }
  #nofinishOrder{
    background: rgb(239, 239, 244);
    color: rgb(153, 153, 153);
    text-align: center;
    font-size: 16px;
    padding: 10px 16px;
    min-width:85px;
  }

  .wait-law-case {
    border: 1px dashed #dcdcdc;
    padding: 10px;
    margin-left: 25px;
    cursor: pointer;
    font-size:15px;
    margin-top:10px;
  }
  .wait-law-case ul li {
    font-size: 14px;
    line-height: 24px;
  }

  .inputBox{
    margin: 30px 20px;
  }
  .beizhuDiolag .inputBox{
    margin: 12px 20px;
  }
  .inputBox input{
    border:1px solid #bbb;
    border-radius:6px;
    height:35px;
    padding-left: 6px;
    width:180px;
   }
  .editorContent .inputBox span{
    padding-right: 6px;
  }
  .saveCarInfo{
    color: #fff;
    border-radius:5px;
    height: 35px;
    display: inline-block;
    width:80px;
    line-height:35px;
    cursor: pointer;
  }

.inputBox .creatInputNo {
  height: 35px;
  line-height: 35px;
  border: 1px solid #bbb;
  border-radius: 4px;
  width: 35px;
  background: #fff;
  border-right: none;
  text-align: center;
  margin-right: -6px;
}
  .cityDialog,.orderSelectDialog,.openOrdercompleteDialog{
    background: rgba(0,0,0,0.3);
    width:100%;
    position: fixed;
    min-height: 100vh;
    top: 0;
    left: 0;
    z-index: 200;
  }
  .openOrdercompleteDialog{
    z-index: 201;
  }
  .cityDialog{
    z-index: 1201;
  }
  .orderSelectDialog .selectBox select{
    border: 1px solid #bbb;
    height: 30px;
    width: 120px;
    border-radius: 5px;
    padding-left: 6px;
  }
  .orderSelectDialog .selectBox textarea{
    border: 1px solid #bbb;
    height: 120px;
    width: 320px;
    border-radius: 5px;
    margin-top: 15px;
    padding-top: 6px;
    text-indent: 15px;
  }
  .orderSelectDialog h4{
    font-weight: 600;
  }
 .openOrdercompleteDialog .completeImg{
    text-align: center;
  }
 .openOrdercompleteDialog .completeText{
   color: #2EAB3B;
   padding-top: 10px;
   font-weight: 600;
   font-size:20px;
 }
 .orderSelectDialog .selectBox{
    margin: 20px 25px;
  }

  .cityDialogBox,.orderSelectDialogBox,.openOrdercompleteDialogBox{
    width: 470px;
    margin: 6vh;
    margin-left:51%;
    background: #fff;
    padding: 20px;
    margin-top: 20vh;
    position: relative;
  }
  .openOrdercompleteDialogBox{
    width: 560px;
  }
  .prev {
    background: url(../images/icon_ctrl_1.png) center center no-repeat;
     height:32px;
     width: 32px;
    margin-top:70px;
  }
   .next {
    background: url(../images/icon_ctrl_0.png) center center no-repeat;
     height:32px;
     width: 32px;
     margin-top:70px;
  }
   .m-selectImgType-tit{
     margin-top: 20px;
   }
   .m-selectImgType-tit ul li {
    border: 1px solid #dcdcdc;
    position: relative;
    text-align: center;
    margin-right: 15px;
    font-size: 16px;
  }
  .m-selectImgType-tit ul li a{
     height: 48px;
     line-height: 48px;
     width: 169px;
     text-align: center;
     display: inline-block
   }
  .m-selectImgType-cont dl dd a{
    height: 40px;
    min-width: 140px;
    display: inline-block;
    padding: 0 6px;
    line-height: 40px;
  }
   .m-selectImgType-tit ul li.showTag,  .m-selectImgType-tit ul li:hover, #selectImgTypeCont .showTag{
    border: 1px solid #35aa42;
  }
  .m-selectImgType-tit ul li .tag{
    position: absolute;
    right: -1px;
    top: 0;
    width: 30px;
    height: 28px;
    background: url(../images/icon_tag_0.png) center center no-repeat;
    background-size: contain;
  }
  .m-selectImgType-cont {
    margin-top: 20px;
  }
  .m-selectImgType-cont dl dd {
    border: 1px solid #dcdcdc;
    position: relative;
    text-align: center;
    margin-right: 15px;
    margin-bottom: 15px;
    font-size: 14px;
    float: left;
  }

  .m-selectImgType-cont dl dd .tag {
    position: absolute;
    right: -1px;
    top: 0;
    width: 30px;
    height: 28px;
    background: url(../images/icon_tag_0.png) center center no-repeat;
    background-size: contain;
  }
  .m-selectImgType-cont dl dd:hover{
    border: 1px solid #35aa42;
  }
  .hoverBox{
    position: absolute;
    background: rgba(0,0,0,0.3);
    height:125px;
    width: 140px;
    z-index: 100;
    margin-left: 8px;
    margin-top:20px;
  }
 .hoverBox .openscalImgBox{
   position: relative;
   top: 50px;
   color: #fff;
   width: 50px;
   margin: 0 auto;
   height: 30px;
   text-align: center;
   line-height: 30px;
   border-radius: 4px;
   cursor: pointer;
 }
 .suibian li .tag {
    position: absolute;
    right: 0;
    top: 0;
    width: 48px;
    height: 46px;
    background: url(../images/icon_tag_0.png) center center no-repeat;
  }
  .bigImgContent .imgSize{
    position:relative;
    overflow: hidden;
  }
  .bigImgContent .imgSize ul{
    display: -webkit-box;
    margin: 0;
    position: absolute;
    left: 0;
  }
  .bigImgContent .imgSize ul li{
    height: 66vh;
    text-align: center;
    line-height:680px;
    display:inline-block;
    overflow: hidden;
    overflow-y: scroll;
  }
.openOrderEndBox{
  text-align: center;
  margin: 25px auto;

}
  .openOrderEndBox .surebutton{
    color: #fff;
    padding: 10px 30px;
    cursor: pointer;

  }
  .dealCaseButton{
    text-align: center;
    padding: 25px 0 60px;
  }
  .dealCaseButton .dealCase{
    padding: 10px 20px;
    border: 1px solid #2EAB3B;

  }
  .dealCaseButton .dealNewCase{
    color: #232323;
    margin-right: 30px;
  }
  .dealCaseButton .dealOldCase{
    color: #fff;
    margin-left:20px;
  }
  .dealText{
    margin: 25px 0;
  }
  .creatCase{
    position:fixed;
    top: 10px;
    right: 15%;
    color: #fff;
    padding: 9px 16px;
    cursor: pointer;
  }
  .videoBox{
    /*position: relative;*/
  }
  .video-player .player-control {
    width: 100%;
    overflow: hidden;
    height: 40px;
    padding: 10px 0;
    background: #000;
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0px;
    z-index: 1010;
  }
  .video-player .player-control-box {
    position: relative;
    width: 100%;
    overflow: hidden;
    display: flex;
  }
  .video-player .player-control-box .player-recording, .video-player .player-control-box .player-recording.disabled {
    cursor: pointer;
    margin-left: 20px;
    width: 18px;
    height: 26px;
  }
  .video-player .player-control-box .player-sound {
    cursor: pointer;
    width: 120px;
    margin-left: 40px;
  }
  .video-player .player-control-box .player-sound-box {
    overflow: hidden;
    width: 120px;
    position: relative;
    top: 3px;
    display: flex;
  }
  .video-player .player-control-box .player-sound-box .player-sound-min {
    width: 15px;
    height: 22px;
  }
  .video-player .player-control-box .player-sound-box .player-sound-ctrl {
    width: 73px;
    height: 22px;
    margin: 0 5px;
    position: relative;
  }
  .noUi-target {
    direction: ltr;
    position: relative;
    top: 10px;
    background: #FAFAFA;
    border-radius: 4px;
    border: 1px solid #D3D3D3;
    box-shadow: inset 0 1px 1px #F0F0F0, 0 3px 6px -5px #BBB;
  }
 .dutyBox{
   display: inline-block;
   vertical-align: middle;
   margin:10px;
 }
 .dutyImg{
   display: inline-block;
   vertical-align: middle;
   height: 30px;
   width: 30px;
   margin-right: 5px;
 }
  .noUi-horizontal .noUi-handle {
    width: 10px;
    height: 10px;
    background: #fff;
    border-radius: 100%;
    left: -5px;
    top: -5px;
  }
  .video-player .player-control-box .player-sound-box .player-sound-max {
    width: 22px;
    height: 22px;
  }
  .video-player .player-control-box .player-auto-flash {
    cursor: pointer;
    width: 19px;
    height: 25px;
    margin-left: 140px;
  }
  .video-player .player-control-box .player-photo {
    cursor: pointer;
    width: 26px;
    height: 40px;
    margin-left: 40px;
  }
  .saveTakeImg{
    padding: 10px 30px;
    color: #fff;
    margin-top: 30px;
    cursor: pointer;
  }
  .suibian li .circle {
    position: absolute;
    right: -12px;
    top: -12px;
    width: 25px;
    height: 25px;
    line-height: 25px;
    text-align: center;
    background: #fff;
    border-radius: 100%;
    border: 1px solid #35aa42;
    color: #35aa42;
  }
  .contentTop{
    background:#fff;
    margin-bottom:10px;
  }
  .topLeft{
    margin-top: 6px;
    position: relative;
  }
  .smallbutton{
    position: absolute;
    top: 11px;
    left: 110px;
    width: 0;
    height: 0;
    border-top: 10px solid transparent;
    border-left: 13px solid #35aa42;
    border-bottom: 10px solid transparent;
  }
  .twosmallbutton{
    position: absolute;
    top: 48px;
    left: 110px;
    width: 0;
    height: 0;
    border-top: 10px solid transparent;
    border-left: 13px solid #35aa42;
    border-bottom: 10px solid transparent;
  }
  .caseButton{
    color: #AEDDB3;
    padding:10px;
    margin: 0 0 1px;
  }
  .selectButton{
    color:#fff;
  }
  .backColorGreenButton{
    color: #fff;
    font-size: 15px;
    display: inline-block;
    width: 85px;
    height: 38px;
    line-height: 38px;
    text-align: center;
    margin-right: 8px;
  }
  .dutyTitle{
    font-size: 15px;
    margin: 10px 20px;
    font-weight:600;
  }
  .lineBox{
    border-bottom: 1px solid #bbb;
    padding-bottom: 15px;
  }
  .addinsitituteInput{
    padding: 10px 0 5px 10%;
  }
  .addinsitituteInput .addinsitituteSpan{
    display: inline-block;
    min-width: 20%;
    font-size: 15px;
  }
  .addinsitituteInput .creatInput{
    height:35px;
    line-height:35px;
    padding-left: 6px;
    border: 1px solid #bbb;
    border-radius:4px;
    width: 200px;
  }
  .addinsitituteInput .creatInputNo{
    height:35px;
    line-height: 35px;
    border: 1px solid #bbb;
    border-radius:4px;
    width: 35px;
    background: #fff;
    border-right: none;
    text-align: center;
  }
</style>
<template>

  <div class="caseManage">
    <div class="loadingBox hide">
      <div class="loadingBoxContent">
          <img  src="../images/loading.gif" />
      </div>
    </div>
    <span class="creatCase backColorGreen" v-if="manualStatus == 2" @click="checkState">繁忙</span>
    <span class="creatCase backColorGreen" v-if="manualStatus == 0" @click="checkState">空闲</span>
    <div class="openOrdercompleteDialog hide">
      <div class="openOrdercompleteDialogBox">
        <span @click="closeopenOrderEndxDialog" class="closeCityDiolag">×</span>
        <div class="selectBox">
          <div class="completeImg">
           <img src="../images/complete.png"/>
            <p class="completeText">查勘已完成</p>
            <div v-if="haveCaseActive">
              <p class="dealText">检测到您当前存在'待处理案件',请选择处理新案件还是处理待处理案件</p>
              <div class="dealCaseButton">
                <span class="dealNewCase dealCase">处理新案件</span>
                <span class="dealOldCase dealCase backColorGreen">处理'待处理案件'</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="orderSelectDialog hide">
      <div class="orderSelectDialogBox">
        <h4>请选择订单完成类型</h4>
        <span @click="closeOrderDiolag" class="closeCityDiolag">×</span>
        <div class="selectBox">
          <div class="selectType">
            <select placeholder="请选择订单类型" v-model="isExceptionComplete">
              <option value="1">正常办结</option>
              <option value="0">异常办结</option>
            </select>
          </div>
          <textarea data-m class="textareaBox" v-model="exceptionComment" placeholder="请输入异常办理描述"></textarea>
          <div class="openOrderEndBox">
            <span class="backColorGreen surebutton" @click="openOrderEndBox">确定</span>
          </div>
        </div>
      </div>
    </div>
    <div class="cityDialog hide">
      <div class="cityDialogBox">
        <span @click="closeCityDiolag" class="closeCityDiolag">×</span>
        <div class="cityNameBox clear">
          <span class="citySimpleName" v-for="item in cityData" @click="selectCity(item)">{{item}}</span>
        </div>
      </div>
    </div>
    <div class="beizhuDiolag hide">
      <div class="editorContent">
        <h4>备注信息</h4>
        <span @click="closeBeizhu" class="right closeEditorCar">×</span>
        <div class="inputBox">
          <textarea style="width:100%;height:200px;border:1px solid #bbb;border-radius:6px;" v-model="beizhuInfo" placeholder="请输入备注信息" ></textarea>
        </div>
        <div style="margin: 20px auto;text-align: center;">
          <span class="backColorGreen saveCarInfo" @click="saveBeizhu">保存</span>
        </div>
      </div>
    </div>
    <div class="editorCarInfo hide">
      <div class="editorContent">
        <h4>车辆信息</h4>
        <span @click="closeEditorCar" class="right closeEditorCar">×</span>
        <div class="inputBox">
          <span>车牌号:</span>
          <input @click="openCityDialog" v-model="getCity" type="text" readonly="readonly" class="creatInputNo"/>
          <input style="width:140px;" v-model="vehicleLicenseNo" placeholder="请输入车牌号" type="text"/>
        </div>
        <!--<div class="inputBox">-->
          <!--<span>手机号:</span><input placeholder="请输入手机号" type="tel" maxlength="11"/>-->
        <!--</div>-->
        <div style="margin: 20px auto;text-align: center;">
          <span class="backColorGreen saveCarInfo" @click="savevehicle">保存</span>
        </div>
      </div>
    </div>
    <div class="takePhoneImgBox hide">
      <div class="takebigImgContent">
        <h4>{{imgType}}</h4>
        <span @click="closetakeCaleImg" class="right closeCaleImgBox">×</span>
        <div class="imgSize" style="height:480px;overflow-y: scroll;">
          <img id="bigsizeImg" :src="originalPhotoUrl" />
        </div>
        <div style="display: flex;justify-content: center;margin-top:20px;">
          <div class="takedeletImg" @click="deletTakeImg">删除</div>
          <div class="takesaveImg backColorGreen" @click="openType">保存</div>
        </div>
      </div>
    </div>
    <div class="sureDutyBox hide">
      <div class="sureDutyContent">
        <h4 class="lineBox">责任认定</h4>
        <span @click="closesureDutyBox" class="right closeCaleImgBox">×</span>
        <p class="dutyTitle" style="margin-top:15px;">事故时间：<span>2018-03-23</span></p>
        <p class="dutyTitle">事故地点：<span>北京市地方对对对</span></p>
        <span class="dutyTitle">事故情形： </span>
        <div class="clear" style="margin-left:30px;">
          <div class="left dutyBox" v-for="(item,index) in caseData">
            <img @click="selectImg(item.imgUrl,index)" class="dutyImg" style='height:30px;width: 30px;' :src="item.imgUrl"><span style="font-size:14px;">{{item.comment}}</span>
          </div>
        </div>
        <div class="imgSize" style="overflow-y: scroll;">
          <div style="margin-left:30px;">
            <p style="margin-left:10px;font-weight:600;">{{saveonevehicleLicenseNo}}</p>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶员姓名</span>
              <input class="creatInput" v-model="personOne" type="text" placeholder="请输入姓名"/>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶员手机号</span>
              <input type="tel" class="creatInput" v-model="phonenoOne"  maxlength="11" placeholder="请输入手机号"/>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶证号</span>
              <input class="creatInput" type="text" v-model="licensenoOne"  placeholder="请输入驾驶证号"/>
            </div>
            <div class="addinsitituteInput">
            <span class="addinsitituteSpan" >保险公司</span>
            <select class="creatInput" v-model="companyOne">
              <option value="">请选择保险公司</option>
            <option v-for="item in companeyOption" :value="item.code">{{item.name}}</option>
            </select>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">责任</span>
              <select class="creatInput selectOne" v-model="dutyOne">
                <option value="">请选择责任类型</option>
                  <option v-for="item in dutyOneOption" :value="item.value">{{item.name}}</option>
              </select>
            </div>
          </div>
          <div style="margin-left:30px;" v-if="carData.length==3 || carData.length==2">
            <p style="margin-left:10px;font-weight:600;">{{savetwovehicleLicenseNo}}</p>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶员姓名</span>
              <input class="creatInput" v-model="personTwo" type="text" placeholder="请输入报案人姓名"/>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶员手机号</span>
              <input type="tel" class="creatInput" v-model="phonenoTwo"  maxlength="11" placeholder="请输入手机号"/>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶证号</span>
              <input class="creatInput" type="text" v-model="licensenoTwo"   placeholder="请输入驾驶证号"/>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan" >保险公司</span>
              <select class="creatInput" v-model="companyTwo">

                <option value="">请选择保险公司</option>
                <option v-for="item in companeyOption" :value="item.code">{{item.name}}</option>
              </select>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">责任</span>
              <select class="creatInput selectTwo" v-model="dutyTwo">
                <option value="">请选择责任类型</option>
                  <option v-for="item in dutyTwoOption" :value="item.value">{{item.name}}</option>
              </select>
            </div>
          </div>
          <div style="margin-left:30px;" v-if="carData.length==3">
            <p style="margin-left:10px;font-weight:600;">{{savethreevehicleLicenseNo}}</p>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶员姓名</span>
              <input class="creatInput" v-model="personThree" type="text" placeholder="请输入姓名"/>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶员手机号</span>
              <input type="tel" class="creatInput" v-model="phonenoThree"  maxlength="11" placeholder="请输入手机号"/>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">驾驶证号</span>
              <input class="creatInput" type="text" v-model="licensenoThree" placeholder="请输入车牌号"/>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan" >保险公司</span>
              <select class="creatInput" v-model="companyOne">
                <option value="">请选择保险公司</option>
                <option v-for="item in companeyOption" :value="item.code">{{item.name}}</option>
              </select>
            </div>
            <div class="addinsitituteInput">
              <span class="addinsitituteSpan">责任</span>
              <select class="creatInput selectThree" v-model="dutyThree">
                <option value="">请选择责任类型</option>
                <option v-for="item in dutyThreeOption" :value="item.value">{{item.name}}</option>
              </select>
            </div>
          </div>
          <div style="margin: 20px;text-align: center;">
            <span class="backColorGreen sureDuty" @click="sureCaseDuty" >确定</span></div>
        </div>

      </div>
    </div>
    <div class="takePhonetypeBox hide">
      <div class="typeContent">
        <h4>请选择照片类型</h4>
        <span @click="closetypebox" class="right closetypeBox">×</span>
        <div class="typeCar">
          <!--<div class="m-selectImgType-tit">-->
            <!--<ul style="display: flex;">-->
              <!--<li v-if="aimActive"  class="showTag" @click="selectCar($event,saveonevehicleLicenseNo)">-->
                <!--<a href="#" title="#">车牌号：{{saveonevehicleLicenseNo}}</a>-->
                <!--<div v-if="aimActive" class="tag"></div>-->
              <!--</li>-->
              <!--<li  class="" v-if="!aimActive" @click="selectCar($event,saveonevehicleLicenseNo)">-->
                <!--<a href="#" title="#">车牌号：{{saveonevehicleLicenseNo}}</a>-->
                <!--<div v-if="aimActive" class="tag"></div>-->
              <!--</li>-->
              <!--<li  v-if="savetwovehicleLicenseNo != '' && !thirdOneActive" class="" @click="selectCar($event,savetwovehicleLicenseNo)" >-->
                <!--<a href="#" title="#">车牌号：{{savetwovehicleLicenseNo}}</a>-->
                <!--<div v-if="thirdOneActive" class="tag"></div>-->
              <!--</li>-->
              <!--<li  v-if="savetwovehicleLicenseNo != '' && thirdOneActive" class="showTag" @click="selectCar($event,savetwovehicleLicenseNo)" >-->
                <!--<a href="#" title="#">车牌号：{{savetwovehicleLicenseNo}}</a>-->
                <!--<div v-if="thirdOneActive" class="tag"></div>-->
              <!--</li>-->
              <!--<li v-if="savethreevehicleLicenseNo != '' && thirdTwoActive " data-id="c0"  class="showTag" @click="selectCar($event,savethreevehicleLicenseNo)">-->
                <!--<a href="#" title="#">车牌号：{{savethreevehicleLicenseNo}}</a>-->
                <!--<div v-if="thirdTwoActive" class="tag"></div>-->
              <!--</li>-->
              <!--<li v-if="savethreevehicleLicenseNo != '' && !thirdTwoActive " data-id="c0"  class="" @click="selectCar($event,savethreevehicleLicenseNo)">-->
                <!--<a href="#" title="#">车牌号：{{savethreevehicleLicenseNo}}</a>-->
                <!--<div v-if="thirdTwoActive" class="tag"></div>-->
              <!--</li>-->
            <!--</ul>-->
          <!--</div>-->
          <div class="m-selectImgType-cont" id="selectImgTypeCont">
              <dl class="clear">
                <dd data-code="item.code" class="ddClass" @click="selectType($event,item.photoTypeCode)" v-for="(item,index) in oneTypeSurveyPhotos">
                  <a href="#" title="#" data-type="item.photoTypeCode">{{item.photoTypeComment}}</a>
                  <div class="tag hide"></div>
                </dd>
              </dl>
          </div>
          <div style="text-align: center;margin-top:30px;">
            <span class="saveTakeImg backColorGreen" @click="sureTakeImg">确定</span>
          </div>
        </div>
      </div>
    </div>
    <div class="scalImgBox hide">
      <div class="bigImgContent">
        <h4>{{imgType}}</h4>
        <span @click="closeScaleImg" class="right closeCaleImgBox">×</span>
        <p style="margin: 20px;color: #666;" v-if="surveyPhotos.length>1">images {{scalImgCurrentIndex}} of {{scalImgLength}}</p>
        <div class="prebutton" @click="preScaleImg" v-if="surveyPhotos.length>1">
          <img src="../images/icon_ctrl_1.png"/>
        </div>
        <div class="imgSize" style="left:24px;">
          <ul class="scaleUlBox">
            <li v-for="item in surveyPhotos" :style="{width: clientimgWidth}">
              <img  :src="item.watermarkPhotoUrl" />
            </li>
          </ul>
        </div>
        <div class="nextbutton" @click="nextScaleImg" v-if="surveyPhotos.length>1">
          <img src="../images/icon_ctrl_0.png"/>
        </div>
      </div>
    </div>
    <div class="contentTop clear">
      <div class="topLeft left">
        <span v-if="showDealCase" class="smallbutton"></span>
        <span v-else class="twosmallbutton"></span>
        <p class="caseButton backColorGreen doingCase selectButton" @click="changeCaseStatius('1')">正在处理案件</p>
        <p class="caseButton backColorGreen waitCase" @click="changeCaseStatius('2')">待处理案件</p>
      </div>
      <div v-show='showDealCase' class="caseLeft">
        <div id="doing" class="cont" >
          <div class="item-txt-list" style="display:flex;justify-content: space-between;" v-if="doingActive">
            <div style="display:flex;">
              <div class="infoDiv">
                <p>车牌号：<span id="bdno">{{leftData.reportVehicleLicenseNo}}</span></p>
                <p>保险公司：{{leftData.insuranceCompanyName}}</p>
                <p class="address">报案地点：{{leftData.reportLocation}}</p>
              </div>
              <div class="infoDiv">
                <p>报案人姓名：{{leftData.reporterName}}</p>
                <p>报案人电话：<span id="bdtel">{{leftData.reporterPhone}}<span></span></span></p>
              </div>
              <div class="infoDiv">
                <p>查勘员姓名：{{leftData.liveSurveyorName}} </p>
                <p>查勘员电话：{{leftData.liveSurveyorPhone }}</p>
                <p v-if="leftData.liveSurveyorStatus == '11'">查勘员状态：待指派</p>
                <p v-if="leftData.liveSurveyorStatus == '12'">查勘员状态：已指派</p>
                <p v-if="leftData.liveSurveyorStatus == '13'">查勘员状态：已到达</p>
                <p v-if="leftData.liveSurveyorStatus == '14'">查勘员状态：查勘中</p>
                <p v-if="leftData.liveSurveyorStatus == '15'">查勘员状态：已查勘</p>
              </div>
              <div class="infoDiv">
                <p style="margin-bottom:6px;">订单状态：<span  v-if="leftData.orderStatus == '06'">待连线</span>
                  <span  v-if="leftData.orderStatus == '07'">查勘中</span>
                  <span  v-if="leftData.orderStatus == '08'">待审核</span>
                  <span  v-if="leftData.orderStatus == '11'">已取消</span>
                </p>
              </div>
            </div>
            <div style="display:flex;">
              <div class="infoDiv">
                <p  v-if="!OnlineActive && !processOnlineActive && !toOnlineActive"  class="link-btn mr10 disabled" id="online">连线</p>
                <p  class="link-btn mr10 disabled " v-if="!OnlineActive && !processOnlineActive && toOnlineActive" id="onlineLoding" >连线中</p>
                <p  class="link-btn mr10" v-if="!OnlineActive && processOnlineActive && !toOnlineActive" @click="join" id="onLinking" >连线 <span id="countTime" data-max="30">{{conttime}}</span>s</p>
                <p  class="link-btn mr10 warn" @click="disconnect('0')" v-if="OnlineActive && !processOnlineActive && !toOnlineActive" id="onOff" >挂断</p>
                <p  class="link-btn-max"  style="margin-top: 5px;" v-if="twoButton && surveyActive" id="finishOrder" @click="openOrderSelect">查勘完成</p>
                <p  v-else  style="margin-top: 5px;" id="nofinishOrder">查勘完成</p>
              </div>
              <div class="infoDiv">
                <p href="javascript:;" class="link-btn" v-if="twoButton" id="hangUp" @click="hangUp(roomId)">挂起订单</p>
                <p href="javascript:;" class="link-btn" v-if="!twoButton" id="nohangUp">挂起订单</p>
                <p href="javascript:;"  style="margin-top: 5px;"  id="beizhu" @click="openBeizhu">备注</p>
              </div>
              <div class="infoDiv">
                <p href="javascript:;" class="link-btn"  id="duty" @click="sureDuty">责任认定</p>
                <!--<p href="javascript:;" class="link-btn" v-if="dutyButton" id="duty" @click="sureDuty(roomId)">责任认定</p>-->
                <!--<p href="javascript:;" class="link-btn" v-if="!dutyButton" id="noduty">责任认定</p>-->
              </div>
            </div>


          </div>
          <div class="m-noContent-mod" v-else>
            <div class="mnm-icon">
              <img  src="../images/bookIco_0.png">
            </div>
            <p>暂无正在处理中的案件...</p>
          </div>
        </div>
      </div>
      <div v-show='!showDealCase' class="caseRight">
        <div id="wait" class="cont">
          <div class="wait-law-case-mod left" id="waitLawCase" style="overflow:hidden;overflow-y: scroll; height:100px;"  v-if="waitActive" >
            <!--<div class="wait-law-case-mod" id="waitLawCase" v-if="waitActive" >-->
            <div v-for="item in noDealCase"  style="display: inline-block;" class="wait-law-case" @dblclick ="goleftLine(item.surveyNo,item)" title="双击进行处理">
              <div style="display:flex;">
                 <div class="infoDiv" style="margin: 2px 7px;">
                    <p>车牌号：{{item.reportVehicleLicenseNo}}</p>
                    <p>查勘员姓名：{{item.liveSurveyorName}}</p>
                    <p v-if = "item.orderStatus == '06'">订单状态：待查勘</p>
                    <p v-if = "item.orderStatus == '07'">订单状态：查勘中</p>
                    <p v-if = "item.orderStatus == '08'">订单状态：已查勘</p>
                    <p v-if = "item.orderStatus == '11'">订单状态：已取消</p>
                  </div>
                  <div class="infoDiv" style="padding: 2px 7px;">
                    <p>报案人电话：{{item.reporterPhone}}</p>
                    <p>查勘员电话：{{item.liveSurveyorPhone}}</p>
                  </div>
              </div>
            </div>
          </div>
          <div class="m-noContent-mod" v-else>
            <div class="mnm-icon">
              <img src="../images/bookIco_0.png">
            </div>
            <p>暂无待处理的案件...</p>
          </div>
        </div>
      </div>
    </div>
    <div class="caseContent">
      <div @click="paizhao"></div>
      <video v-if="haveVideoActive" style="height:1px;width: 1px;" src="../images/source.mp3" autoplay="" type="video/mp3" controls="controls"></video>
      <div class="caseCenter">
        <div class="video-player">
          <div id="video" class="video" style="width:100%;height: 488px;">
            <div v-show="steamActive" class="video-panel" style="height:500px;display:flex;">
              <div>
                <div id="PusherAreaID" style=" width:0.1px; height:0.1px;position:relative;top:-10px;">
                  <object ID='Pusher' CLASSID="CLSID:01502AEB-675D-4744-8C84-9363788ED6D6" codebase="../../dutyVideo/static/sdk/LiteAVAX.cab#version=2,2,1,0"
                  width="0.1" height='0.1' events="True"></object>
                </div>
                <div id="PlayerAreaID" style="width:100%; height:470px;">
                  <object ID='Player' CLASSID="CLSID:99DD15EF-B353-4E47-9BE7-7DB4BC13613C"
                  codebase="../../dutyVideo/static/sdk/LiteAVAX.cab#version=2,2,1,0"
                          :style="{width: clientWidth}"
                           height='470' events="True"></object>
                </div>
              </div>
              <div>
                <img style="width:100%;height:500px;" src="../../dutyVideo/static/videoDefoult.png"/>
              </div>
            </div>
            <div v-show="steamActive" style="width:800px;height:100px;margin-top:-100px;"  class="videoBox ">
              <div id="bar_46122248740144030"  :style="{width: clientWidth}" style=" height: 100%; position: relative; bottom: 0; right: 0;">
                <div class="player-control">
                  <div class="player-control-box">
                    <div id="closeRecording" class="player-recording">
                    <img src="../images/video_ico_0.png">
                    </div>
                    <div class="player-auto-flash" id="flashButton" @click="openLight">
                      <img src="../images/video_ico_1.png">
                    </div>
                    <div class="player-photo" id="photoButton" @click="takePic">
                      <img src="../images/video_ico_2.png">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div v-show="!steamActive" class="videoBox" style="display:flex;justify-content:center;">
              <img style="width:100%;height:500px;" id="video-background" src="../../dutyVideo/static/video-default.png"/>
              <img style="width:100%;height:500px;" id="video-background1" src="../../dutyVideo/static/videoDefoult.png"/>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="casePhotos">
      <div class="g-content-row">
        <div class="gcr-mod m-carNo-imgInfo">
          <div class="gcr-tit" id="carInfo" style="justify-content: space-between;">
            <div style="display:flex;">
              <h4>照片信息</h4>
              <div v-if="carPhoneActive" style="display:flex;">
                <!--<dl class="m-carNo-list" id="selectImgType" @click="selectCarAim('0',$event,saveonevehicleLicenseNo)">-->
                  <dl class="m-carNo-list" id="selectImgType">
                  <dd id="c0" class="data-car-m" >
                    <span v-if="oneCarActive">标的车：{{saveonevehicleLicenseNo}}</span>
                    <span v-else>标的车：{{saveonevehicleLicenseNo}}</span>
                    <i data-type="1"  data-id="839" data-licenseno="saveonevehicleLicenseNo" @click="editorCar(saveonevehicleLicenseNo,saveoneoriginalVehicleLicenseNo,isOrderVehicleone,'0' )" v-if="oneCarActive" class="u-edit-icon"></i>
                    <i data-type="1"  data-id="839" data-licenseno="saveonevehicleLicenseNo" @click="editorCar(saveonevehicleLicenseNo,saveoneoriginalVehicleLicenseNo,isOrderVehicleone,'0')" v-else class="u-edit-iconGreay hide"></i>
                  </dd>
                </dl>
                <!--<dl v-if="ImgInfo.length>1" class="m-carNo-list" id="selectImgTypeTwo" @click="selectCarAim('1',$event,savetwovehicleLicenseNo)">-->
                  <dl v-if="ImgInfo.length>1" class="m-carNo-list" id="selectImgTypeTwo" >
                  <dd id="c1" class="data-car-m">
                    <span v-if="TwoCarActive" style="color: #35aa42;">三者车：{{savetwovehicleLicenseNo}}</span>
                    <span v-else>三者车：{{savetwovehicleLicenseNo}}</span>
                    <i data-type="1"  data-id="839"  @click="editorCar(savetwovehicleLicenseNo,savetwooriginalVehicleLicenseNo,isOrderVehicletwo,'1')" v-if="TwoCarActive" class="u-edit-icon"></i>
                    <i data-type="1" data-id="839"  @click="editorCar(savetwovehicleLicenseNo,savetwooriginalVehicleLicenseNo,isOrderVehicletwo,'1')" v-else class="u-edit-iconGreay"></i>
                  </dd>
                </dl>
                <dl v-if="ImgInfo.length > 2" class="m-carNo-list" id="selectImgTypeThree">
                  <dd id="c2" class="data-car-m">
                    <span v-if="threeCarActive" style="color: #35aa42;">三者车：{{savethreevehicleLicenseNo}}</span>
                    <span v-else>三者车：{{savethreevehicleLicenseNo}}</span>
                    <i data-type="1"  data-id="839" @click="editorCar(savethreevehicleLicenseNo,savethreeoriginalVehicleLicenseNo,isOrderVehiclethree,'2')" v-if="threeCarActive" class="u-edit-icon"></i>
                    <i data-type="1"  data-id="839" @click="editorCar(savethreevehicleLicenseNo,savethreeoriginalVehicleLicenseNo,isOrderVehiclethree,'2')" v-else class="u-edit-iconGreay "></i>
                  </dd>
                </dl>
                <div class="m-carNo-add" v-if="carThreeActive" id="addCarNo" @click="openAddCar('3')"></div>
              </div>
            </div>
          </div>
          <div class="gcr-cont" style="padding-top: 0">
            <div class="m-carNo-imgList" id="picListZone" v-if="carPhoneActive">
              <!--<div class="prev" @click="preImginfo"></div>-->
              <div class="ulBox">
                <ul v-if="oneCarActive" class="suibian">
                  <li class="suibianList"  @click="seletedCarType($event,saveonevehicleLicenseNo,item.photoTypeCode)" @mouseenter="enterBox($event)" @mouseleave="leaveBox($event)" v-for="(item,index) in oneTypeSurveyPhotos">
                    <div class="hoverBox hide">
                      <div v-if="item.hasUrl == 'true'" @click.stop="scaleImg(item.surveyPhotos,$event,item.photoTypeCode,item.photoTypeComment)" class="openscalImgBox backColorGreen">查看</div>
                    </div>
                    <div class="liImgbox">
                      <img :src="item.surveyPhotos[0].watermarkPhotoUrl">
                      <br>
                      <span class="title">
                        <a href="javascript:;">{{item.photoTypeComment}}</a>
                       </span>
                      <div class="tag hide"></div>
                      <div class="circle" v-if="item.photoCount > 1">{{item.photoCount}}</div>
                    </div>
                  </li>
                </ul>
              </div>
              <!--<div class="next" @click="nextImgInfo"></div>-->
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="footer-inner footer_p">
        <p> 版权所有：北京中车宝联科技有限责任公司</p>
      </div>
    </div>
  </div>
</template>
<script>
  import Viewer from 'viewerjs';
  import axios from 'axios'
  export default {
    ready() {
      console.log('111');
    },
    data() {
      return{
        companeyOption: [],
        dutyOneOption:[{'value':'1','name':'无责'},{'value':'2','name':'同责'},{'value':'0','name':'全责'}],
        dutyTwoOption:[{'value':'1','name':'无责'},{'value':'2','name':'同责'},{'value':'0','name':'全责'}],
        dutyThreeOption:[{'value':'1','name':'无责'},{'value':'2','name':'同责'},{'value':'0','name':'全责'}],
        dutyOne: '',
        dutyTwo: '',
        dutyThree: '',
        personOne: '',
        phonenoOne: '',
        licensenoOne: '',
        companyOne: '',
        personTwo: '',
        phonenoTwo: '',
        licensenoTwo: '',
        companyTwo: '',
        personThree: '',
        phonenoThree: '',
        licensenoThree: '',
        companyThree: '',
        sureImg: '',
        selectUrl: '../../dutyVideo/static/selectUrl.png',
        noSelectUrl: '../../dutyVideo/static/noSelectUrl.png',
        caseData: [{'caseDetail':'追尾的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'逆行的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'倒车的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'溜车的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'开关车门的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'违反交通信号的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'未按规定让行的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'并线的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'全部责任的其他情形','imgUrl':'../../dutyVideo/static/noSelectUrl.png'},{'caseDetail':'双方应付同等责任的','imgUrl':'../../dutyVideo/static/noSelectUrl.png'}],
        dutyButton: false,
        clientWidth: '',
        clientimgWidth:'',
        showDealCase: true,
        beizhuInfo: "",
        editorcar: "",
        opsType: "1",
        isOrderVehicleone: "",
        isOrderVehicletwo:"",
        isOrderVehiclethree: "",
        saveoneoriginalVehicleLicenseNo: "",
        savetwooriginalVehicleLicenseNo: "",
        savethreeoriginalVehicleLicenseNo: "",
        haveVideoActive: false,
        exceptionCode: "",
        exceptionComment: "",
        isExceptionComplete: "1",
        photoCountActive: false,
        aimActive: false,
        thirdOneActive: false,
        thirdTwoActive: false,
        carThreeActive: true,
        carPhoneActive: false,
        steamActive: false,
        manualStatus: 2,
        noDealCase:[],
        vehicleLicenseNo: "",
        savephotoType: "",
        savephotoUrl: "",
        surveyNo: "",
        saveonevehicleLicenseNo: "",
        savetwovehicleLicenseNo: "",
        savethreevehicleLicenseNo: "",
        oneCarActive: true,
        TwoCarActive: false,
        threeCarActive: false,
        haveCaseActive: false,
        surveyPhotos:[],//同种类型图片
        imglength: 15,//缩略图片个数,
        scalImgLength:"",//同种图片个数
        scalImgCurrentIndex: "1",
        oneTypeSurveyPhotos: [
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "0",
            "photoTypeComment": "侧前方",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_1.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "1",
            "photoTypeComment": "侧后方",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_2.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "2",
            "photoTypeComment": "碰撞部位",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_3.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "3",
            "photoTypeComment": "本方车辆全景",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/1.png"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "4",
            "photoTypeComment": "对方车辆全景",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/1.png"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "5",
            "photoTypeComment": " 其它现场照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_4.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "6",
            "photoTypeComment": "本方驾驶证",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_5.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "7",
            "photoTypeComment": "本方行驶证",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_6.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "8",
            "photoTypeComment": "对方驾驶证",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_7.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "9",
            "photoTypeComment": "对方行驶证",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_8.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoTypeCode": "20",
            "photoTypeComment": "视频的类型",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_9.jpg"
              }
            ]
          }
        ],
        tooneTypeSurveyPhotos: [
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "0",
            "photoTypeComment": "45度车辆前景照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_1.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "1",
            "photoTypeComment": "当事人和车辆合影",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_2.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "2",
            "photoTypeComment": "当事车辆车架号",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_3.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "3",
            "photoTypeComment": "车辆受损细节(1)",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/1.png"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "4",
            "photoTypeComment": "车辆受损细节(2)",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/1.png"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "5",
            "photoTypeComment": " 交强险标志",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_4.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "6",
            "photoTypeComment": "银行卡照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_5.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "7",
            "photoTypeComment": "其它照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_6.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "8",
            "photoTypeComment": "事故认定书",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_7.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "9",
            "photoTypeComment": "行驶本照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_8.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "10",
            "photoTypeComment": "驾驶证照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_9.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "11",
            "photoTypeComment": "当事人签名照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/2.png"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "12",
            "photoTypeComment": "身份证正面照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_10.jpg"
              }
            ]
          },{
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "13",
            "photoTypeComment": "身份证背面照片",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_11.jpg"
              }
            ]
          },
          {
            'hasUrl': 'false',
            "photoCount": "",
            "photoType": "14",
            "photoTypeComment": "查勘员与车辆合影",
            "surveyPhotos": [
              {
                "photoId": "",
                "watermarkPhotoUrl": "../../dutyVideo/static/3.png"
              }
            ]
          }
        ],
        carTypecarType: [],
        takephotoUrl:'',
        cityData: ['京','津','冀','晋','蒙','辽','吉','黑','沪','苏','浙','皖','闽','赣','鲁','豫','鄂','湘','粤','贵','云','藏','陕','甘','青','宁','新','琼','渝','川','桂'],
        surveyActive: false,
        twoButton: true,
        toOnlineActive: false,
        processOnlineActive: false,
        OnlineActive: false,
        waitActive: false,
        doingActive: false,
        jianKongActive: true,
        allCaseActive: false,
        ImgInfo: [],
        imgIndex: '',
        imgType: "",
        photoUrl: "",
        getCity: '京',
        left:0,
        scaleImgLeft: 0,
        roomId: "",//查勘号不是房间号
        roomInstance: '',
        localEl:"",
        remoteEl:"",
        videosEl: "",
        userId: "",
        orgCode: "",
        conttime: '30',
        leftData:"",
        node: "",
        connectNode: "",
        sessionNode: "",
        syncSessionNodePath: "",
        t: '',
        originalPhotoUrl:"",
        watermarkPhotoUrl:"",
        source: '',
        longitude:"",
        latitude:"",
        savevehicleLicenseNo: "",
        photoType: "",
        errorCode: "",
        errorMsg: "",
        remoteStream: "",
        localStream: "",
        warning:"",
        handleSurvey: "",
        beatTime: "",
        freshActive: false,
        originalVehicleLicenseNo: "",
        isOrderVehicle: "",
        dataString: '',
        dataInfoMsg: '',
        fromAccount: '',
        videoroomID: "",//房间号
        carData: [],
        dutyVehicles: [],
        accidentDes: '',
        listeners: {
//          "onConnNotify": webimhandler.onConnNotify, //选填
//          "onBigGroupMsgNotify": function (msg) {
//            webimhandler.onBigGroupMsgNotify(msg, function (msgs) {
//              receiveMsg(msgs);
//            })
//          }, //监听新消息(大群)事件，必填
//          "onMsgNotify": this.onMsgNotify(), //监听新消息(私聊(包括普通消息和全员推送消息)，普通群(非直播聊天室)消息)事件，必填
//          "onGroupSystemNotifys": RTCRoom.onGroupSystemNotifys, //监听（多终端同步）群系统消息事件，必填
          "onGroupInfoChangeNotify": webimhandler.onGroupInfoChangeNotify,
          // 'onKickedEventCall': self.onKickedEventCall // 踢人操作
        }
      }
    },
    created(){
      this.listeners.onConnNotify = this.onConnNotify;
      this.listeners.onMsgNotify = this.onMsgNotify;
       this.onDoubleRoomPageLoad();
//      this.saveaccout(roomUserId)
//      this.getUserMedia({dutyVideo:true},"","");
      this.userId = localStorage.getItem('userId');
      this.orgCode = localStorage.getItem('orgCode');
      this.localEl = document.getElementById('local');
      this.videosEl = document.getElementById('dutyVideo');
      this.getbeatTime()
      var m1 = localStorage.getItem('m'+this.userId);
      if(!this.freshActive){
        m1++;
      }
      localStorage.setItem('m'+this.userId,m1);
      if(this.userId&& this.orgCode){

      }else{
        this.$router.push({path:"/"})
      }
      this.getNodealCase()
      this.checkStateOne();
      this.getLeftData()
    },
    watch:{
      'dutyOne': function(){
        if(this.carData.length == 3){
          if(this.dutyOne == '0 '){//全责
            this.dutyThree = 1;
            this.dutyTwo = 1;
          }
          if(this.dutyOne == 2){//同责
            if(this.dutyTwo == '1'){
              this.dutyThree = 2;
            }
            if(this.dutyThree == 1){
              this.dutyTwo = 2;
            }
          }
          if(this.dutyOne == 1){//无责
            if(this.dutyTwo == 2){
              this.dutyThree = 2;
            }
            if(this.dutyThree == 2){
              this.dutyTwo = 2;
            }
            if(this.dutyTwo == 1){
              this.dutyThree = 0;
            }
            if(this.dutyThree == 1){
              this.dutyTwo = 0;
            }
          }
        }else if(this.carData.length == 2){
          if(this.dutyOne == '0'){//全责
            this.dutyTwo = 1;
          }
          if(this.dutyOne == 1){//无责
            this.dutyTwo = 0;
          }
          if(this.dutyOne == 2){//同责
            this.dutyTwo = 2;
          }
        }else if(this.carData.length == 1){
          this.dutyOne = 0;
        }

      },
      'dutyTwo': function(){
        if(this.carData.length == 3){
          if(this.dutyTwo == '0'){//全责
            this.dutyThree = 1;
            this.dutyOne = 1;
          }
          if(this.dutyTwo == 2){//同责
            if(this.dutyOne == 1){
              this.dutyThree = 2;
            }
            if(this.dutyThree == 1){
              this.dutyOne = 2;
            }
          }
          if(this.dutyTwo == 1){//无责
            if(this.dutyOne == 2){
              this.dutyThree = 2;
            }
            if(this.dutyThree == 2){
              this.dutyOne = 2;
            }
            if(this.dutyOne == 1){
              this.dutyThree = 0;
            }
            if(this.dutyThree == 1){
              this.dutyOne = 0;
            }
          }
        }else if(this.carData.length == 2){
          if(this.dutyTwo == '0'){//全责
            this.dutyOne = 1;
          }
          if(this.dutyTwo == 1){//无责
            this.dutyOne = 0;
          }
          if(this.dutyTwo == 2){//同责
            this.dutyOne = 2;
          }
        }
      },
      'dutyThree': function() {
        if(this.carData.length == 3){
          if (this.dutyThree == '0') {//全责
            this.dutyTwo = 1;
            this.dutyOne = 1;
          }
          if (this.dutyThree == 2) {//同责
            if (this.dutyTwo == 1) {
              this.dutyOne = 2;
            }
            if (this.dutyOne == 1) {
              this.dutyTwo = 2;
            }
          }
          if (this.dutyThree == 1) {//无责
            if (this.dutyOne == 2) {
              this.dutyTwo = 2;
            }
            if (this.dutyTwo == 2) {
              this.dutyOne = 2;
            }
            if (this.dutyOne == 1) {
              this.dutyTwo = '0';
            }
            if (this.dutyTwo == 1) {
              this.dutyOne = '0'
            }
          }
        }
      }
    },
    mounted () {
      var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;//浏览器宽度　

      this.clientWidth = w*(0.45)+'px';
      this.clientimgWidth = w*(0.40)+'px';
      window.onbeforeunload = function(){
        localStorage.setItem('A',"2")
      };
      window.onunload = function(){
//        that.roomInstance.disconnect();
      }
      this.beatTime = setInterval(() => {
        this.getbeatTime()
      }, 15000);
//      this.dataInfoMsg = setInterval(() => {
//        this.DataInfo()
//      }, 1000)
    },
    methods: {
      sureCaseDuty(){
        var companyNameOne = '',companyNameTwo = '',companyNameThree = '';
        for(let i in this.companeyOption){
          if(this.companyOne != ''){
            if(this.companyOne == this.companeyOption[i].code){
              companyNameOne = this.companeyOption[i].name;
            }
            if(this.companyTwo == this.companeyOption[i].code){
              companyNameTwo = this.companeyOption[i].name;
            }
            if(this.companyThree== this.companeyOption[i].code){
              companyNameThree = this.companeyOption[i].name;
            }
          }
        }
        if(this.carData.length == 3){
          this.dutyVehicles = [{'plateNumber': this.saveonevehicleLicenseNo,'driverName': this.personOne,'driverPhone':this.phonenoOne,'driverLicenseNumber':this.licensenoOne,'insuranceCompanyCode':this.companyOne,'insuranceCompanyName':companyNameOne,'dutyType':this.dutyOne},
            {'plateNumber': this.savetwovehicleLicenseNo,'driverName': this.personTwo,'driverPhone':this.phonenoTwo,'driverLicenseNumber':this.licensenoTwo,'insuranceCompanyCode':this.companyTwo,'insuranceCompanyName':companyNameTwo,'dutyType':this.dutyTwo},
            {'plateNumber': this.savethreevehicleLicenseNo,'driverName': this.personThree,'driverPhone':this.phonenoThree,'driverLicenseNumber':this.licensenoThree,'insuranceCompanyCode':this.companyThree,'insuranceCompanyName':companyNameTwo,'dutyType':this.dutyThree}];
        }else if(this.carData.length == 2){
          this.dutyVehicles = [{'plateNumber': this.saveonevehicleLicenseNo,'driverName': this.personOne,'driverPhone':this.phonenoOne,'driverLicenseNumber':this.licensenoOne,'insuranceCompanyCode':this.companyOne,'insuranceCompanyName':companyNameOne,'dutyType':this.dutyOne},
            {'plateNumber': this.savetwovehicleLicenseNo,'driverName': this.personTwo,'driverPhone':this.phonenoTwo,'driverLicenseNumber':this.licensenoTwo,'insuranceCompanyCode':this.companyTwo,'insuranceCompanyName':companyNameTwo,'dutyType':this.dutyTwo}
            ];
        }else if(this.carData.length == 1){
          this.dutyVehicles = [{'plateNumber': this.saveonevehicleLicenseNo,'driverName': this.personOne,'driverPhone':this.phonenoOne,'driverLicenseNumber':this.licensenoOne,'insuranceCompanyCode':this.companyOne,'insuranceCompanyName':companyNameOne,'dutyType':this.dutyOne}
          ];
        }
        for(let i in this.dutyVehicles){
          this.dutyVehicles[i].driverPhone = this.dutyVehicles[i].driverPhone.replace(/\s/g,"");
          var reg = new RegExp("^[0-9]*$");
          if(this.dutyVehicles[i].driverName == ''){
            this.open4("请输入姓名")
            return
          }else if(this.dutyVehicles[i].driverPhone == ''){
            this.open4("请输入手机号");
            return
          }else if(!reg.test(this.dutyVehicles[i].driverPhone)){
            this.open4("请输入正确手机号")
          }else if(this.dutyVehicles[i].driverLicenseNumber == ''){
            this.open4("请输入驾驶证号")
            return;
          }else if(this.dutyVehicles[i].insuranceCompanyCode == ''){
            this.open4("请选择保险公司");
            return
          }else if(this.dutyVehicles[i].dutyType == '' && this.dutyVehicles[i].dutyType != '0'){
            this.open4("请选择责任类型");
            return
          }
        }
        if(this.accidentDes == '' && this.accidentDes != '0'){
          this.open4("请选择事故情形");
          return
        }
        var paramData = {
          'surveyNo':this.roomId,
          "accidentDes": this.accidentDes,
          'dutyVehicles': this.dutyVehicles
        };
        axios.post(this.ajaxUrl+"/duty/v1/confirm",paramData)
          .then(response => {
            console.log(response.data)
            if(response.data.rescode == 200){
              this.open2(response.data.resdes);
              $('.sureDutyBox').addClass("hide")
            }else{
              if(response.data.rescode == "300"){
                this.$router.push({path:"/"})
              }
              this.open4(response.data.resdes);
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })

      },
      selectImg(imgUrl,index){
        console.log(imgUrl)
          for(let i in this.caseData){

            this.caseData[i].imgUrl = this.noSelectUrl;
            if(i == index){

              this.caseData[i].imgUrl = this.selectUrl;
              console.log(this.caseData[i].imgUrl)
            }
          }
          this.accidentDes = index;
      },
      //选择车辆类型
      selectType(ele,photoType){
        if(($(ele.target).parent().attr("class")).indexOf("ddClass") > -1){
          $(ele.target).parent().siblings().removeClass("showTag")
          $(ele.target).parent().siblings().children(".tag").addClass("hide");
          $(ele.target).siblings().removeClass("hide")
          $(ele.target).parent().addClass("showTag")
          this.photoType = photoType
        }
      },
      getCompaney(){
        axios.get(this.ajaxUrl+"/duty/v1/insurance/company")
          .then(response => {
            if(response.data.rescode == 200){
              console.log(response.data.data)
            this.companeyOption = response.data.data;
            }else{
              this.open4(response.data.resdes)
              if(response.data.rescode == 300){
                this.$router.push({path:'/'})
              }
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      getAccident(){
        axios.get(this.ajaxUrl+"/duty/v1/accident/des")
          .then(response => {
            if(response.data.rescode == 200){
              console.log(response.data.data)
              for(let i in response.data.data){
                response.data.data[i].imgUrl = '../../dutyVideo/static/noSelectUrl.png';
              }
              this.$nextTick(() => {
                this.caseData = response.data.data;
              })
            }else{
              this.open4(response.data.resdes)
              if(response.data.rescode == 300){
                this.$router.push({path:'/'})
              }
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      sureDuty(){
        this.getCompaney();
        this.getAccident();
        $(".sureDutyBox").removeClass('hide');
        var survey = this.roomId;
        axios.get(this.ajaxUrl+"/duty/v1/vehicle/list/"+survey)
          .then(response => {
            if(response.data.rescode == 200){
              this.carData = response.data.data;
              if(this.carData.length == 1){
                this.saveonevehicleLicenseNo = this.carData[0]
              }else if(this.carData.length == 2){
                this.saveonevehicleLicenseNo = this.carData[0];
                this.savetwovehicleLicenseNo = this.carData[1]
              }else if(this.carData.length == 3){
                this.saveonevehicleLicenseNo = this.carData[0];
                this.savetwovehicleLicenseNo = this.carData[1]
                this.savethreevehicleLicenseNo = this.carData[2]
              }
            }else{
              this.open4(response.data.resdes)
              if(response.data.rescode == 300){
                this.$router.push({path:'/'})
              }
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
        this.sureImg = this.noSelectUrl;
      },
      onConnNotify (resp) {
        switch (resp.ErrorCode) {
          case webim.CONNECTION_STATUS.ON:
            console.log('建立连接成功: ' + resp.ErrorInfo)
            webim.Log.warn('建立连接成功: ' + resp.ErrorInfo);
            break;
          case webim.CONNECTION_STATUS.OFF:
            console.log('连接已断开，无法收到新消息，请检查下你的网络是否正常: ' + resp.ErrorInfo);
           this.open4('请检查下你的网络是否正常')
            break;
          case webim.CONNECTION_STATUS.RECONNECT:
            console.log('连接状态恢复正常: ' + resp.ErrorInfo)
            break;
          default:
            console.log('未知连接状态: =' + resp.ErrorInfo);
            break;
        }
       },
      //3个照片类型
      takephoneType(type){

        var photoType = 'WEB$$takePic'+ type;
        console.log(photoType)
        this.sendMsg(this.fromAccount,photoType)
      },
      paizhao(){

      },
      changeCaseStatius(type){
        if(type == 1){
//          this.getLeftData()
          this.showDealCase = true;
          $(".doingCase").addClass("selectButton")
          $(".waitCase").removeClass("selectButton")
        }else if(type == 2){
          this.getNodealCase()
          $(".waitCase").addClass("selectButton");
          $(".doingCase").removeClass("selectButton")
          this.showDealCase = false;
        }
      },
      onDoubleRoomPageLoad() {
      var that = this;
      doCheckIE();
    //doLoadActiveXPlugin();
    RTCRoom.httpRequest({
      //url: "https://lvb.qcloud.com/weapp/double_room/get_im_login_info",
      url: "https://nweeyr0w.qcloud.la/weapp/double_room/get_im_login_info",
      data: {userIDPrefix: "IE(ActiveX)"},
      method: "POST",
      success: function (ret) {
        if (ret.data.code != 0) {
          console.log("获取IM登录信息失败:" + ret.data.toString());
        }
        //ret.data.serverDomain = "https://lvb.qcloud.com/weapp/double_room/";
        ret.data.serverDomain = "https://nweeyr0w.qcloud.la/weapp/double_room/";
        userID = ret.data.userID;
        ret.data.divId = "PusherAreaID";
        ret.data.userName = myUserName;
        console.log(that.listeners)
        RTCRoom.init({
          data: ret.data,
          success: function (ret) {
            console.log('ret'+JSON.stringify(ret))
            console.log("2082"+JSON.stringify(loginInfo))
            webim.login(
              loginInfo, that.listeners, options,
              function (resp) {
                console.log('webim登陆成功');
                console.log('userID'+userID);
                loginInfo.identifierNick = resp.identifierNick;//设置当前用户昵称;
                //保存imaccount
                that.saveWebimaccount(loginInfo.identifier)
              },
              function (err) {
                console.log(err.ErrorInfo);
              }
            );
            console.log("登录初始化成功");
            // refreshRoomList(3000);
            // var nameview = document.getElementById("my-username");
            // nameview.innerText = myUserName;
          },
          fail: function () {
            console.log("获取IM登录信息成功，初始化失败:", ret.data.toString());
          }
        });

        RTCRoom.setListener({
          onGetPusherList: onGetMemberList,
          onPusherJoin: onMemberJoin,
          onPusherQuit: onMemberQuit,
           onRoomClose: that.onRoomClose,
//          onRecvRoomTextMsg: that.onRecvRoomTextMsg
        });

      },
      fail: function (ret) {
        alert("进入双人视频失败，请刷新页面重试，错误码:" + ret.code + ret.msg);
      }
    });
  },
      saveWebimaccount(webAccount){
        console.log(webAccount)
        var data = {
          "imAccount":webAccount,
          'userId':this.userId,
        }
        axios.post(this.ajaxUrl+"/web/surveyor/v1/im/account",data)
          .then(response => {
            if(response.data.rescode == 200){
              this.open2(response.data.resdes)
            }else{
              this.open4(response.data.resdes)
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      onRoomClose(ret){
        var type = '1'
        this.disconnect(type)
      },
      onRecvRoomTextMsg(ret){
        console.log("收到消息:" + ret.textMsg);
      },
      //发送消息
     sendMsg (selToID,isReceive) {
     console.log('selToID'+selToID)
     console.log('isReceive'+isReceive)
    var selType = webim.SESSION_TYPE.C2C;//一对一
    var selSessHeadUrl;
    var selSess = new webim.Session(selType, selToID, selToID, selSessHeadUrl, Math.round(new Date().getTime() / 1000));
    var isSend = false;//是否为自己发送
    var seq = -1;//消息序列，-1表示sdk自动生成，用于去重
    var random = Math.round(Math.random() * 4294967296);//消息随机数，用于去重
    var msgTime = Math.round(new Date().getTime() / 1000);//消息时间戳
    var subType;//消息子类型
    if (selType == webim.SESSION_TYPE.GROUP) {
      //群消息子类型如下：
      //webim.GROUP_MSG_SUB_TYPE.COMMON-普通消息,
      //webim.GROUP_MSG_SUB_TYPE.LOVEMSG-点赞消息，优先级最低
      //webim.GROUP_MSG_SUB_TYPE.TIP-提示消息(不支持发送，用于区分群消息子类型)，
      //webim.GROUP_MSG_SUB_TYPE.REDPACKET-红包消息，优先级最高
      subType = webim.GROUP_MSG_SUB_TYPE.COMMON;
    } else {
      //C2C消息子类型如下：
      //webim.C2C_MSG_SUB_TYPE.COMMON-普通消息,
      subType = webim.C2C_MSG_SUB_TYPE.COMMON;
    }
    var msg = new webim.Msg(selSess, isSend, seq, random, msgTime, loginInfo.identifier, subType, loginInfo.identifierNick);
    var text_obj = new webim.Msg.Elem.Text(isReceive);
    msg.addText(text_obj);
    //调用发送消息接口
    webim.sendMsg(msg, function (resp) {
      //if (selType == webim.SESSION_TYPE.C2C) {//私聊时，在聊天窗口手动添加一条发的消息，群聊时，长轮询接口会返回自己发的消息
      //  addMsg(msg);
      //}
      webim.Log.info("发自定义消息成功");
      console.log("发自定义消息成功")
    }, function (err) {
      webim.Log.info(err.ErrorInfo);
      console.log('发自定义消息失败:', err);
    });
  },
      //监听消息
        onMsgNotify(newMsgList) {
          console.info('监听新消息事件 =====> ' + newMsgList);
//            console.warn('监听新消息事件 =====> ' + newMsgList);
          var sess, newMsg,selSess;
          //获取所有聊天会话
          var sessMap = webim.MsgStore.sessMap();

          for (var j in newMsgList) {//遍历新消息
            newMsg = newMsgList[j];
            this.fromAccount = newMsg.fromAccount;
            selSess = newMsg.getSession();
            //在聊天窗体中新增一条消息
            this.dataString = convertMsgtoHtml(newMsg);

            this.dataString = this.dataString.replace(/&quot;/g, "'");
            this.DataInfo()

          }
          //消息已读上报，以及设置会话自动已读标记
          webim.setAutoRead(selSess, true, true);
          for (var i in sessMap) {
            sess = sessMap[i];
            if (loginInfo.identifier != sess.id()) {//更新其他聊天对象的未读消息数
//                    updateSessDiv(sess.type(), sess.id(), sess.unread());
            }
          }
        },
      DataInfo(){
        console.log('dataString2067'+this.dataString)
        if(this.dataString){
          this.dataString = eval("("+this.dataString+")");

          if(this.dataString.hangup == 'hangup'){//对方退出房间
            this.disconnect("1");
            return
          }else if('imgurl' in this.dataString){//监听收到图片
            if('source' in this.dataString){
              this.source = this.dataString.source;
              //小程序发送的IM
            }
            console.log('2193'+this.dataString.imgurl)
            this.longitude = this.dataString.longitude;
            this.latitude = this.dataString.latitude;
            this.watermarkPhotoUrl = this.dataString.watermarkPhotoUrl;
            this.originalPhotoUrl = this.dataString.originalPhotoUrl;
            console.log(this.originalPhotoUrl)
            this.$nextTick(() => {
              new Viewer(document.getElementById('bigsizeImg'), {
                url: 'data-src',
                navbar:false,
                toolbar:false,
                loop: true
              })
            })
            this.openTakePhone();
          }else{
//            this.getroomList()
            this.getsyncSessionNodePath();


          }
        }

      },
      //退出房间(挂断)
      disconnect(type){
        this.source = ''
//        console.log('accountInfo.roomID'+accountInfo.roomID)
        clearInterval(this.t);
        this.conttime = 30;
        this.releaseStatius()
        this.surveyActive = true;
        if(type == '0'){//手动挂断
          var text = 'hangup';
          this.sendMsg(this.fromAccount,text);
        }
          RTCRoom.exitRoom();
          inRoom = false;
          RTCRoom.setMute(false);
          this.$nextTick(()=>{
            this.steamActive = false;
            this.twoButton =  true;
            this.toOnlineActive = false;
            this.processOnlineActive = false;
            this.OnlineActive  = false;
            this.dutyButton = true;
            this.listeners.onMsgNotify = this.onMsgNotify;
//            webim.login(
//              loginInfo, this.listeners, options,
//              function (resp) {
//                console.log('webim登陆成功');
//                console.log('userID'+userID);
//                loginInfo.identifierNick = resp.identifierNick;//设置当前用户昵称;
//                //保存imaccount
//                console.log('0000'+loginInfo.identifier)
//              },
//              function (err) {
//                alert(err.ErrorInfo);
//              }
//            );
//            this.onDoubleRoomPageLoad();
          })
      },
      getroomList(){//获取房间id
        var that = this;
        console.log('2254'+this.dataString)
        RTCRoom.getRoomList({
          data: {
            index: 0,
            cnt: 100
          },
          success: function(ret) {
            ret.rooms.forEach(function (roomInfo) {
              console.log('roomInfo'+roomInfo)
//              that.videoroomID =  roomInfo.roomID.toString();
//              console.log('房间id'+that.videoroomID)
//              roomID = that.videoroomID;
//              that.getsyncSessionNodePath();
            });
          },
          fail: function(ret) {
            console.log("拉取房间列表失败");
          }
        });
      },
      //保存roomuserId
      saveaccout(roomuserId){
        var data = {
          "imAccount": roomuserId,
          "userId": 58

        }
        axios.post(this.ajaxUrl+"/heartbeat/v1/beat",data)
          .then(response => {
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      showFull(){
        var myvideo=document.getElementById("remote");
        myvideo.webkitrequestFullscreen();
      },
      getbeatTime(){
        var data = {
          'userid':this.userId,

        }
        axios.post(this.ajaxUrl+"/heartbeat/v1/beat",data)
          .then(response => {
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      open6() {
        this.$message({
          showClose: true,
          message: '操作成功',
          type: 'success'
        });
      },
      open2(resdes) {
        this.$message.success(resdes);
      },
      open4(resdes) {
        this.$message.error(resdes);
      },
      //保存照片
      sureTakeImg(){
//        if(this.savevehicleLicenseNo == ''){
//          this.open4("请选择车牌号")
//        }
        if(this.photoType == ''){
          this.open4("请选择照片类型")
        }else{
          if(this.source == 'wechat'){
            var url = '/survey/order/v2/photo/choice';
          }else{
            var url = '/survey/order/v1/photo/choice';
          }
          var data = {
            "originalPhotoUrl":this.originalPhotoUrl,
            'photoType':this.photoType,
            "photoUrl":this.watermarkPhotoUrl,
            "surveyNo": this.roomId,
            "vehicleLicenseNo": '',
            "longitude":this.longitude,
            "latitude": this.latitude
          }
          axios.post(this.ajaxUrl+url,data)
            .then(response => {
              if(response.data.rescode == 200){
                $(".takePhoneImgBox").addClass("hide")
                $(".takePhonetypeBox").addClass("hide")
                this.open2(response.data.resdes)
                this.photoType = '';
                $("#selectImgTypeCont").find(".tag").addClass("hide");
                $(".ddClass").removeClass("showTag");
                this.getPhontos();
                this.getPhontosOne();
                this.aimActive = false;
                this.thirdOneActive = false;
                this.thirdTwoActive=false;
              }else{
                this.open4(response.data.resdes)
              }
            }, err => {
              console.log(err);
            })
            .catch((error) => {
              console.log(error)
            })
        }

      },
      forceClose(){
        var data = {
          "userId":this.userId
        }
        axios.post(this.ajaxUrl+"/web/surveyor/v1//force/close",data)
          .then(response => {
            if(response.data.rescode == 200){
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      enterVedeo(){
        $("#bar_46122248740144030").removeClass("hide");
      },
      leaveVideo(){
        $("#bar_46122248740144030").addClass("hide");
      },
      openLight(){
        var openLight = 'WEB$$openLight';
        this.sendMsg(this.fromAccount,openLight);
      },
      //点击拍照
      takePic(){
        //发送拍照片指令
        var isPhone = 'WEB$$takePic';
         this.sendMsg(this.fromAccount,isPhone);
      },

      //改变坐席自动状态
      releaseStatius(){
        var data = {
          "surveyNo":this.roomId
        }
        axios.post(this.ajaxUrl+"/survey/order/v1/release",data)
          .then(response => {
            if(response.data.rescode == 200){
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      //
      rollback(){
        var data = {
          "surveyNo":this.roomId
        }
        axios.post(this.ajaxUrl+"/survey/order/v1/timeout/rollback",data)
          .then(response => {
            if(response.data.rescode == 200){
              this.getNodealCase();
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },

      //忽略订单
      ignoreCase(){
        var data = {
          'surveyNo':this.roomId,
          "userId":this.userId
        }
        axios.post(this.ajaxUrl+"/survey/order/v1/ignore",data)
          .then(response => {
            if(response.data.rescode == 200){
              $(".takePhoneImgBox").addClass("hide")
              $(".takePhonetypeBox").addClass("hide")
              this.open2(response.data.resdes)
              this.photoType = '';
              $("#selectImgTypeCont").find(".tag").addClass("hide");
              $(".ddClass").removeClass("showTag");
              this.aimActive = false;
              this.thirdOneActive = false;
              this.thirdTwoActive=false;
            }else{
              this.open4(response.data.resdes)
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      join(){
        this.haveVideoActive = false;
        this.handleSurvey = '';
        this.acceptStatus(this.roomId);
        $(".takePhoneImgBox").addClass("hide");
        this.twoButton= false;
        this.toOnlineActive= true;
        this.processOnlineActive= false;
        this.OnlineActive=false;
        this.surveyActive = false;

        this.conttime = 30;
        clearInterval(this.t);
        var that = this;
        var isReceive = 'WEB$$goToConnection';
        that.steamActive = true;
        this.$nextTick(() => {
          var cameras = RTCRoom.getCameras();
          if (cameras.camera_cnt <= 0) {
            alert("进入房间失败，没有可用的摄像头");
            this.steamActive = false;
            this.twoButton =  true;
            this.toOnlineActive = false;
            this.processOnlineActive = false;
            this.OnlineActive  = false;
            this.listeners.onMsgNotify = this.onMsgNotify;
            return;
          }
          inRoom = true;
          RTCRoom.enterRoom({
            data: {
              roomID: that.videoroomID
            },
            success: function () {
              that.sendMsg(that.fromAccount,isReceive);
              that.twoButton = false;
              that.surveyActive = false;
              that.toOnlineActive = false;
              that.processOnlineActive =  false;
              that.OnlineActive = true;
              this.dutyButton = true;
            },
            fail: function (ret) {
              console.log(ret);
            }
          })
        })
      },
      //监听是否有视频发起
      getsyncSessionNodePath(){
        var that = this;
        if(this.dataString){
          that.haveVideoActive = true;
          console.log('2693'+that.dataString);
          that.getNodealCase();
          that.leftData = that.dataString.orderData;
//          that.leftData = that.dataString.surveyOrderInfo;
          that.videoroomID = that.dataString.videoRoomId;
            console.log('房间id'+that.videoroomID)
            roomID = that.videoroomID;
            that.roomId = that.leftData.surveyNo;
            console.log(that.leftData.reportVehicleLicenseNo)
            that.savevehicleLicenseNo = that.leftData.reportVehicleLicenseNo;
            that.saveonevehicleLicenseNo = that.leftData.reportVehicleLicenseNo
            if(that.leftData.isNew == '0'){
              that.twoButton = false;

            }else{
              that.twoButton = true;
            }
          that.dutyButton = false;
          that.doingActive = true;
          that.toOnlineActive = false;
          that.processOnlineActive = true;
          that.OnlineActive = false;
          that.surveyActive = false;
          clearInterval(that.t);       //停止计时器
          that.t = setInterval(function () {
            if (that.conttime > 0) {
              that.conttime = that.conttime-1;
            }
            if (that.conttime === 0) {

              that.haveVideoActive = false;
              //发送未接视频指令
              var  isReceive = 'WEB$$refuseConnection';//未接听视频
              that.sendMsg(that.fromAccount,isReceive);
              console.log('2829'+that.leftData.isNew)
              if(that.leftData.isNew == '0'){//新订单发起视频未连接
                that.ignoreCase();
                that.ImgInfo = [];
                that.carPhoneActive = false;
                that.saveonevehicleLicenseNo ='';
                that.savetwovehicleLicenseNo = '';
                that.savethreevehicleLicenseNo = '';
                that.leftData = '';
                that.savevehicleLicenseNo = '';
                that.doingActive = false;//显示左边无案件图标
              }else if(that.leftData.isNew == '1'){//旧案件发起视频未连接
                if(that.leftData.isWait  == "1"){// 不是待处理订单需要停留在左边
                  that.twoButton = true;
                  that.dutyButton = false;
                  that.surveyActive = true;
                  that.toOnlineActive=false;
                  that.processOnlineActive=false;
                  that.OnlineActive=false;
                  that.handleSurvey = '';
                }else if(that.leftData.isWait  == "0"){//待处理订单需要停留在右边
                  that.ImgInfo = [];
                  that.carPhoneActive = false;
                  that.saveonevehicleLicenseNo ='';
                  that.savetwovehicleLicenseNo = '';
                  that.savethreevehicleLicenseNo = '';
                  that.leftData = '';
                  that.savevehicleLicenseNo = '';
                  that.doingActive = false;//显示左边无案件图标
                  that.rollback();

                }
              }
              that.conttime = 30;
              clearInterval(that.t);       //停止计时器
            }
          }, 1000)
          that.getPhontos();
          this.getPhontosOne()
        }
      },
      //后台修改状态
      acceptStatus(surveyNo){
        var data = {
          "surveyNo": surveyNo
        }
        axios.post(this.ajaxUrl+"/survey/video/v1/accept/connect",data)
          .then(response => {
            if(response.data.rescode == 200){
            }else{
              this.open4(response.data.resdes)
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
     //点击挂起
      hangUp(surveyNo){
        var data = {
          "surveyNo": surveyNo
        }
        axios.post(this.ajaxUrl+"/survey/order/v1/suspend",data)
          .then(response => {
            if(response.data.rescode == 200){
                this.ImgInfo = [];
                this.carPhoneActive = false;
                this.saveonevehicleLicenseNo ='';
                this.savetwovehicleLicenseNo = '';
                this.savethreevehicleLicenseNo = '';
                this.leftData = '';
                this.savevehicleLicenseNo = '';
                this.doingActive = false;//显示左边无案件图标
                this.getNodealCase();
            }else{
              this.open4(response.data.resdes)
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      //获取挂起订单列表
      getNodealCase(){
        var data = {
          "userId":parseInt(this.userId)
        }
        axios.post(this.ajaxUrl+"/survey/order/v1/wait/order/list",data)
          .then(response => {
            if(response.data.rescode == 200){
              this.noDealCase = response.data.data;
//            /  this.noDealCase =  [{"reportVehicleLicenseNo":"222",'reporterPhone':"33",'liveSurveyorName':"333",'liveSurveyorPhone':"5555",'orderStatus':"06"},{"reportVehicleLicenseNo":"222",'reporterPhone':"33",'liveSurveyorName':"333",'liveSurveyorPhone':"5555",'orderStatus':"06"},{"reportVehicleLicenseNo":"222",'reporterPhone':"33",'liveSurveyorName':"333",'liveSurveyorPhone':"5555",'orderStatus':"06"},{"reportVehicleLicenseNo":"222",'reporterPhone':"33",'liveSurveyorName':"333",'liveSurveyorPhone':"5555",'orderStatus':"06"},{"reportVehicleLicenseNo":"222",'reporterPhone':"33",'liveSurveyorName':"333",'liveSurveyorPhone':"5555",'orderStatus':"06"},{"reportVehicleLicenseNo":"222",'reporterPhone':"33",'liveSurveyorName':"333",'liveSurveyorPhone':"5555",'orderStatus':"06"}]
              if(this.noDealCase.length!=0){
                this.waitActive = true;//应该true
              }
            }else{
              this.open4(response.data.resdes)
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      editorCar(vehicleLicenseNo,originalVehicleLicenseNo,isOrderVehicle,editorcar){
        $(".editorCarInfo").removeClass("hide");
        this.originalVehicleLicenseNo  = originalVehicleLicenseNo;
        this.isOrderVehicle = isOrderVehicle;
        this.opsType = "0";
        console.log(this.originalVehicleLicenseNo);
        this.getCity = vehicleLicenseNo.substring(0,1);
        this.vehicleLicenseNo = vehicleLicenseNo.substring(1);
        console.log(vehicleLicenseNo)
      },
      //保存车辆车牌号
      savevehicle(){
        if(this.vehicleLicenseNo == ''){
          this.open4("请输入车牌号")

        }else{
          if(this.originalVehicleLicenseNo == ''){
            this.originalVehicleLicenseNo = this.getCity+this.vehicleLicenseNo;
          }
          var data = {
            'surveyNo':this.roomId,
            "vehicleLicenseNo":'',
            "originalVehicleLicenseNo": this.originalVehicleLicenseNo,
            "isOrderVehicle": this.isOrderVehicle,
            "opsType": this.opsType
          }
          axios.post(this.ajaxUrl+"/survey/vehicle/v1/vehicle",data)
            .then(response => {
              if(response.data.rescode == 200){
                if(this.isOrderVehicle == "1"){
                  this.leftData.reportVehicleLicenseNo = this.getCity+this.vehicleLicenseNo;
                }
                $(".editorCarInfo").addClass("hide")
                this.vehicleLicenseNo = "";
                this.getCity = "京";
                this.open2(response.data.resdes);
                this.getPhontos();
                this.getPhontosOne();
              }else{
                this.open4(response.data.resdes)
              }
            }, err => {
              console.log(err);
            })
            .catch((error) => {
              console.log(error)
            })
        }
      },
        //保存备注信息
      saveBeizhu(){
        this.beizhuInfo = this.beizhuInfo.replace(/(^\s*)|(\s*$)/g, "");
        if(this.beizhuInfo == ''){
          this.open4("请输入备注")
        }else{
          var data = {
            'surveyNo':this.roomId,
            "noteContent":this.beizhuInfo

          }
          axios.post(this.ajaxUrl+"/survey/order/v1/save/note",data)
            .then(response => {
              if(response.data.rescode == 200){
                this.beizhuInfo = '';
                $(".beizhuDiolag").addClass('hide');
              }else{
                this.open4(response.data.resdes)
              }
            }, err => {
              console.log(err);
            })
            .catch((error) => {
              console.log(error)
            })
        }
      },
      closeEditorCar(){
        $(".editorCarInfo").addClass('hide');
        this.getCity = '京';
        this.vehicleLicenseNo = '';
      },
      closeBeizhu(){
        $(".beizhuDiolag").addClass('hide');
      },
      getPhontosOne(){
        var survey = this.roomId;
        axios.get(this.ajaxUrl+"/duty/v1/photo/list/"+survey)
          .then(response => {
            if(response.data.rescode == 200){
              console.log('55'+JSON.stringify(response.data.data))
              this.oneTypeSurveyPhotos =  [
                {
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "0",
                  "photoTypeComment": "侧前方",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_1.jpg"
                    }
                  ]
                },{
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "1",
                  "photoTypeComment": "侧后方",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_2.jpg"
                    }
                  ]
                },
                {
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "2",
                  "photoTypeComment": "碰撞部位",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_3.jpg"
                    }
                  ]
                },{
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "3",
                  "photoTypeComment": "本方车辆全景",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/1.png"
                    }
                  ]
                },
                {
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "4",
                  "photoTypeComment": "对方车辆全景",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/1.png"
                    }
                  ]
                },{
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "5",
                  "photoTypeComment": " 其它现场照片",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_4.jpg"
                    }
                  ]
                },
                {
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "6",
                  "photoTypeComment": "本方驾驶证",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_5.jpg"
                    }
                  ]
                },{
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "7",
                  "photoTypeComment": "本方行驶证",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_6.jpg"
                    }
                  ]
                },
                {
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "8",
                  "photoTypeComment": "对方驾驶证",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_7.jpg"
                    }
                  ]
                },{
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "9",
                  "photoTypeComment": "对方行驶证",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_8.jpg"
                    }
                  ]
                },
                {
                  'hasUrl': 'false',
                  "photoCount": "",
                  "photoTypeCode": "20",
                  "photoTypeComment": "视频的类型",
                  "surveyPhotos": [
                    {
                      "photoId": "",
                      "watermarkPhotoUrl": "../../dutyVideo/static/icon_noImg_9.jpg"
                    }
                  ]
                }
              ];
              for(let i in response.data.data){
                    for(let j in this.oneTypeSurveyPhotos){
                      if((response.data.data[i].photoTypeCode == this.oneTypeSurveyPhotos[j].photoTypeCode) && response.data.data[i].surveyPhotos !== null){
                        this.oneTypeSurveyPhotos[j] = response.data.data[i];
                        this.oneTypeSurveyPhotos[j].hasUrl = 'true';
                      }
                    }
              }
            }else{
              this.open4(response.data.resdes)
              if(response.data.rescode == 300){
                this.$router.push({path:'/'})
              }
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      getPhontos(){
        var data = {
          'surveyNo':this.roomId,
        }
        axios.post(this.ajaxUrl+"/survey/vehicle/v1/vehicle/list",data)
          .then(response => {
            if(response.data.rescode == 200){
              this.carPhoneActive = true;
              this.ImgInfo = response.data.data;
              console.log(this.ImgInfo)

              if(this.ImgInfo.length == 3){
                 this.carThreeActive = false;
              }
              for(let k in this.ImgInfo){
                if(k == 0){
                  for(let i in this.ImgInfo[k].allTypeSurveyPhotos){
                    this.saveonevehicleLicenseNo = this.ImgInfo[k].vehicleLicenseNo;
                    this.saveoneoriginalVehicleLicenseNo = this.ImgInfo[k].originalVehicleLicenseNo;
                    this.isOrderVehicleone = this.ImgInfo[k].isOrderVehicle;
//                    for(let j in this.oneTypeSurveyPhotos){
//                      if(this.ImgInfo[k].allTypeSurveyPhotos[i].photoType == this.oneTypeSurveyPhotos[j].photoType){
//                        this.oneTypeSurveyPhotos[j] = this.ImgInfo[k].allTypeSurveyPhotos[i];
//                        this.oneTypeSurveyPhotos[j].hasUrl = 'true';
//                      }
//                    }
                  }
                }else if(k == 1){
                  for(let i in this.ImgInfo[k].allTypeSurveyPhotos){
                    this.savetwovehicleLicenseNo = this.ImgInfo[k].vehicleLicenseNo;
                    this.savetwooriginalVehicleLicenseNo = this.ImgInfo[k].originalVehicleLicenseNo;
                    this.isOrderVehicletwo = this.ImgInfo[k].isOrderVehicle;
//                    for(let j  in this.twoTypeSurveyPhotos){
//                      if(this.ImgInfo[k].allTypeSurveyPhotos[i].photoType == this.twoTypeSurveyPhotos[j].photoType){
//                        this.twoTypeSurveyPhotos[j] = this.ImgInfo[k].allTypeSurveyPhotos[i];
//                        this.twoTypeSurveyPhotos[j].hasUrl = 'true';
//                      }
//                    }
                  }
                }else if(k == 2){
                  for(let i in this.ImgInfo[k].allTypeSurveyPhotos){
                    this.savethreevehicleLicenseNo = this.ImgInfo[k].vehicleLicenseNo;
                    this.savethreeoriginalVehicleLicenseNo = this.ImgInfo[k].originalVehicleLicenseNo;
                    this.isOrderVehiclethree = this.ImgInfo[k].isOrderVehicle;
//                    for(let j  in this.threeTypeSurveyPhotos){
//                      if(this.ImgInfo[k].allTypeSurveyPhotos[i].photoType == this.threeTypeSurveyPhotos[j].photoType){
//                        this.threeTypeSurveyPhotos[j] = this.ImgInfo[k].allTypeSurveyPhotos[i];
//                        this.threeTypeSurveyPhotos[j].hasUrl = 'true';
//                      }
//                    }
                  }
                }
              }
            }else{
              this.open4(response.data.resdes)
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })


      },
      selectCarAim(order,ele,savevehicleLicenseNo){
        this.left = 0;
        this.savevehicleLicenseNo = savevehicleLicenseNo;
        $(".suibian").css("left",this.left);
        switch (order) {
          case "0":
            this.oneCarActive = true;
            this.TwoCarActive = false;
            this.threeCarActive = false;
            $(".tag").addClass("hide")
            break;
          case "1":
            this.oneCarActive = false;
            this.TwoCarActive = true;
            this.threeCarActive = false;
            $(".tag").addClass("hide")
            break;
          case "2":
            this.oneCarActive = false;
            this.TwoCarActive = false;
            this.threeCarActive = true;
            $(".tag").addClass("hide")
            break;
        }

      },
    //查勘完成
      openOrderEndBox(){
//        $(".loadingBox").removeClass('hide')

        var data = {
          "surveyNo":this.roomId,
          "isExceptionComplete":this.isExceptionComplete,
          "exceptionCode":this.exceptionCode,
          "exceptionComment": this.exceptionComment
        }
        axios.post(this.ajaxUrl+"/survey/order/v1/weixin/complete",data)
          .then(response => {
//            $(".loadingBox").addClass('hide')
            if(response.data.rescode == 200){
              this.ImgInfo = [];
              this.carPhoneActive = false;
              this.saveonevehicleLicenseNo ='';
              this.savetwovehicleLicenseNo = '';
              this.savethreevehicleLicenseNo = '';
              this.leftData = '';
              this.savevehicleLicenseNo = '';
              this.steamActive = false;
              this.twoButton =  true;
              this.toOnlineActive = false;
              this.processOnlineActive = false;
              this.OnlineActive  = false;
              this.doingActive = false;
              $(".orderSelectDialog").addClass("hide");
              this.open6()
            }else{
//              $(".loadingBox").addClass('hide')
              this.open4(response.data.resdes)
            }
          }, err => {
            console.log(err);
            $(".loadingBox").addClass('hide')
          })
          .catch((error) => {
            console.log(error)
            $(".loadingBox").addClass('hide')
          })
      },
      closeopenOrderEndxDialog(){
        $(".openOrdercompleteDialog").addClass("hide");
      },
      openOrderSelect(){
        $(".orderSelectDialog").removeClass("hide");
      },
      openBeizhu(){
        $(".beizhuDiolag").removeClass("hide");
          var data = {
            'surveyNo':this.roomId,
          }
          axios.post(this.ajaxUrl+"/survey/order/v1/query/note",data)
            .then(response => {
              if(response.data.rescode == 200){
                this.beizhuInfo =response.data.data.noteContent;
              }else{
                this.open4(response.data.resdes)
              }
            }, err => {
              console.log(err);
            })
            .catch((error) => {
              console.log(error)
            })
      },
      closeOrderDiolag(){
        $(".orderSelectDialog").addClass("hide");
      },
      getLeftData(){
          var data = {
            "userId": this.userId
          }
          axios.post(this.ajaxUrl+"/survey/order/v1/processing",data)
            .then(response => {
              if(response.data.rescode == 200){
                if(response.data.data){
                  this.doingActive = true;
                  this.leftData = response.data.data;
                  this.roomId = response.data.data.surveyNo;
                  this.savevehicleLicenseNo = response.data.data.reportVehicleLicenseNo;
                  this.saveonevehicleLicenseNo = this.savevehicleLicenseNo;
                  this.twoButton = true;
                  this.surveyActive = true;
                  this.toOnlineActive = false;
                  this.processOnlineActive = false;
                  this.OnlineActive = false;
                  this.getPhontos();
                  this.getPhontosOne()
                }
              }else{
                this.open4(response.data.resdes)
              }
            }, err => {
              console.log(err);
            })
            .catch((error) => {
              console.log(error)
            })
      },
      //双击挂起订单
      goleftLine(surveyNo,itemdata){
        this.roomId = surveyNo;
        if(!this.doingActive){
          var data = {
            "surveyNo":surveyNo
          }
          axios.post(this.ajaxUrl+"/survey/order/v1/wait/handle",data)
            .then(response => {
              if(response.data.rescode == 200){
                this.leftData = itemdata;
                this.savevehicleLicenseNo = this.leftData.reportVehicleLicenseNo;
                this.handleSurvey = response.data.data.surveyNo;
                this.twoButton = true;
                this.surveyActive = true;
                this.toOnlineActive = false;
                this.processOnlineActive = false;
                this.OnlineActive = false;
                this.doingActive = true;
                this.roomId = surveyNo;
                this.dutyButton = true;
                this.getNodealCase();
                this.getPhontos();
                this.getPhontosOne();
              }else{
                this.open4(response.data.resdes)
              }
            }, err => {
              console.log(err);
            })
            .catch((error) => {
              console.log(error)
            })
        }
      },
      //选择车辆
      selectCar(ele,vehicleLicenseNo){
        console.log(vehicleLicenseNo)
        this.savevehicleLicenseNo = vehicleLicenseNo;
        if(vehicleLicenseNo == this.saveonevehicleLicenseNo){
          this.aimActive = true;
          this.thirdOneActive = false;
          this.thirdTwoActive=false;
        }else if(vehicleLicenseNo == this.savetwovehicleLicenseNo){
          this.aimActive = false;
          this.thirdOneActive = true;
          this.thirdTwoActive=false;
        }else if(vehicleLicenseNo == this.savethreevehicleLicenseNo){
          this.aimActive = false;
          this.thirdOneActive = false;
          this.thirdTwoActive = true;
        }

      },

      //选择缩略图车辆类型
      seletedCarType(ele,vehicleLicenseNo,photoType){
        if($(ele.target).attr("class").indexOf("hoverBox")>-1){
          $(ele.target).parent().siblings().find(".tag").addClass("hide");
          $(ele.target).parent().find(".tag").removeClass("hide");
          this.photoType = photoType;
          this.savevehicleLicenseNo = vehicleLicenseNo;
          var node = this.node;
        }
      },
      enterBox(ele){
        $(ele.target).find(".hoverBox").removeClass("hide")
      },
      leaveBox(ele){
        $(ele.target).find(".hoverBox").addClass("hide")
      },
      checkStateOne(){
        axios.get(this.ajaxUrl+"/web/surveyor/v1/webstatus/"+this.userId)
          .then(response => {
            if(response.status == 200){
              this.manualStatus = response.data.data.manualstatus;

            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })

      },
      checkState(){
        if(this.manualStatus == 2){
          var data = {
            "userId":parseInt(this.userId),
            "manualStatus":'0'
          }
          axios.post(this.ajaxUrl+"/web/surveyor/v1/manual/status",data)
            .then(response => {
              if(response.data.rescode == 200){
                if(response.data.data.code == 0){
                  this.manualStatus = response.data.data.manualStatus;
                }else{
                  this.open4("暂时无法改变状态")
                }
              }else{
                this.open4(response.data.resdes)
              }
            }, err => {
              console.log(err);
            })
            .catch((error) => {
              console.log(error)
            })
        }else{
          var data = {
            "userId":parseInt(this.userId),
            "manualStatus":'2'
          }
          axios.post(this.ajaxUrl+"/web/surveyor/v1/manual/status",data)
            .then(response => {
              if(response.data.rescode == 200){
                if(response.data.data.code == 0){
                  this.manualStatus = response.data.data.manualStatus;
                }else{
                  this.open4("暂时无法改变状态")
                }
              }else{
                this.open4(response.data.resdes)
              }
            }, err => {
              console.log(err);
            })
            .catch((error) => {
              console.log(error)
            })
        }
      },

      openType(){
        if(this.photoType != ''  && this.roomId != '' && this.longitude != '' && this.latitude != ''&&this.originalPhotoUrl !=''){//已经选择车辆信息
          this.sureTakeImg()
        }else{
          this.photoType = '';
          if(this.originalPhotoUrl != ''){
            $(".takePhonetypeBox").removeClass("hide");
            this.selectCar("",this.savevehicleLicenseNo)
          }else{
            this.open4("图片保存失败,请重新上传")
          }

        }
      },
      deletTakeImg(){
        if(this.source != ''){
          this.watermarkPhotoUrl = ''
        }
        var data = {
          'originalPhotoUrl':this.originalPhotoUrl,
          "watermarkPhotoUrl":this.watermarkPhotoUrl,
        }
        axios.post(this.ajaxUrl+"/survey/order/v1/photo/remove",data)
          .then(response => {
            if(response.data.rescode == 200){
              $(".takePhoneImgBox").addClass("hide")
              this.open2(response.data.resdes)
            }else{
              this.open4(response.data.resdes)
            }
          }, err => {
            console.log(err);
          })
          .catch((error) => {
            console.log(error)
          })
      },
      closetypebox(){
        $(".takePhonetypeBox").addClass("hide");
        this.photoType = ''
      },
      preImginfo(){
        if(this.left < '-1'){
          this.left = this.left + 184;
          $(".suibian").animate({
              left : this.left
            },500)
        }
      },
      nextImgInfo(){
        var length = -(((this.imglength-7)*184)+1)
        if(this.left > length){
          this.left = this.left - 184;
          $(".suibian").animate({left: this.left},500)
        }
      },
      closeCityDiolag(){
        $(".cityDialog").addClass("hide")
      },
      selectCity(city){
        this.getCity = city;
        $(".cityDialog").addClass("hide")
      },
      openCityDialog(){//打开城市
        $(".cityDialog").removeClass("hide")
      },
      openAddCar(){
        $(".editorCarInfo").removeClass("hide");
        this.originalVehicleLicenseNo = '';
        this.isOrderVehicle = '0';
        this.getCity = '京';
        this.opsType = "1"
      },
//      上一张
      preScaleImg(){
        var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;//浏览器宽度　
        var liwidth =  w*(0.40);
        console.log();
        console.log(this.scaleImgLeft)
        if(this.scaleImgLeft < '-1'){
          this.scaleImgLeft = this.scaleImgLeft + liwidth;
          this.scalImgCurrentIndex --;
          $(".scaleUlBox").animate({left: this.scaleImgLeft},500)
        }
      },
//      下一张
      nextScaleImg(){
        if(this.scalImgCurrentIndex >= this.scalImgLength) {
          return;
        }

          var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;//浏览器宽度　
        var liwidth =  w*(0.40);
//        var liwidth = $('.scaleUlBox').find("li").width();
        console.log(liwidth)
//        var length = -(((this.scalImgLength-2)*(liwidth))-1)
        console.log(this.scaleImgLeft);
        console.log(length)
        this.scalImgCurrentIndex ++;
        this.scaleImgLeft = this.scaleImgLeft - liwidth;
        $(".scaleUlBox").animate({left: this.scaleImgLeft},500)

      },
      openTakePhone(){
        $(".takePhoneImgBox").removeClass('hide');
      },
      closeScaleImg(){
        $(".scalImgBox").addClass('hide');
        this.scaleImgLeft = 0;
        this.scalImgCurrentIndex = '1';
        $(".scaleUlBox").css("left",this.scaleImgLeft)
        this.surveyPhotos = [];
        this.imgType = "";
      },
      closetakeCaleImg(){
        $(".takePhoneImgBox").addClass('hide');
          this.originalPhotoUrl = '';
          this.watermarkPhotoUrl = '';
          this.longitude = '';
          this.latitude = '';
      },
      closesureDutyBox(){
        $(".sureDutyBox").addClass('hide');
      },
//查看放大图片
      scaleImg(surveyPhotos,ele,code,photoTypeComment){
        $(".scaleUlBox").css("left",'0')
        this.scaleImgLeft = 0;
        this.scalImgLength = surveyPhotos.length;
        this.surveyPhotos = surveyPhotos;
        console.log(surveyPhotos)
        if(surveyPhotos.length !=0 ){
          console.log(photoTypeComment)
          this.scaleImgLeft = 0;
          $(".scalImgBox").removeClass('hide');
          this.imgType = photoTypeComment;
        }
      },
      tabChange(event){
        var attributes = event.target.attributes;
        for(var i=0;i< attributes.length;i++){
          if(i == 1){
            if(attributes[i].nodeValue.indexOf('caseJiankong') > -1){
              attributes[i].nodeValue = 'caseJiankong active';
              $(".allCase").attr("class","allCase");
              this.jianKongActive = true;
              this.allCaseActive = false;
            }else  if(event.target.attributes[i].nodeValue.indexOf('allCase') > -1){
              $(".caseJiankong").attr("class","caseJiankong");
              attributes[i].nodeValue = 'allCase active';
              this.jianKongActive = false;
              this.allCaseActive = true;
            }
          }
        }
      }
    },
    components: {

    },
    destroyed () {
      clearInterval(this.beatTime);
      clearInterval(this.dataInfoMsg);
    },
  }

</script>

